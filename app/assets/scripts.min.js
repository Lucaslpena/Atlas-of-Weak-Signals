function Attractor(t,s,i){this.ws=t;var e=width-2*padding,a=e/grid,o=padding+a*(s+1);o-=a/2,e=height-2*padding;var h=padding+(a=e/grid)*(i+1);h-=a/2,this.pos=createVector(o,h),this.vel=createVector(0,0),this.acc=createVector(0,0),this.mass=6,this.G=15,this.scaler=5,this.calculateAttraction=function(t){var s=p5.Vector.sub(this.pos,t.pos),i=s.mag();i=constrain(i,50,55),s.normalize();var e=this.G*this.mass*t.mass/(i*i);return s.mult(e),s},this.applyForce=function(t){var s=t.copy();s.div(this.mass),this.acc.add(s)},this.update=function(){this.edges(),this.vel.add(this.acc),this.pos.add(this.vel),this.acc.set(0,0)},this.display=function(){push(),stroke(30,25,30),textAlign(CENTER,CENTER),text(this.ws,this.pos.x,this.pos.y),pop()},this.edges=function(){this.pos.y>height&&(this.vel.y*=-1,this.pos=createVector(width/2,height/2),this.vel=createVector(0,0)),this.pos.x>width&&(this.vel.x*=-1,this.pos=createVector(width/2,height/2),this.vel=createVector(0,0)),this.pos.x<0&&(this.vel.x*=-1,this.pos=createVector(width/2,height/2),this.vel=createVector(0,0)),this.pos.y<0&&(this.vel.x*=-1,this.pos=createVector(width/2,height/2),this.vel=createVector(0,0))}}function Particle(t,s,i){this.atlas=i,this.pos=createVector(t,s),this.vel=createVector(random(-3,3),random(-3,3)),this.acc=createVector(0,-8),this.mass=10,this.G=5,this.previousVel=createVector(0,0),this.maxSpeed=3,this.theta=0,this.size=20,this.spawn=function(){},this.update=function(){this.edges(),this.vel.add(this.acc),this.vel.limit(this.maxSpeed),this.pos.add(this.vel),this.acc.set(0,0)},this.display=function(){this.vel.heading(),radians(90);this.theta+=this.vel.x*this.vel.mag()/20;push(),translate(this.pos.x,this.pos.y),textAlign(CENTER,CENTER),textSize(15),text(this.atlas.kw,0,0),pop()},this.edges=function(){this.pos.x<-this.size&&(this.pos.x=width+this.size),this.pos.y<-this.size&&(this.pos.y=height+this.size),this.pos.x>width+this.size&&(this.pos.x=-this.size),this.pos.y>height+this.size&&(this.pos.y=-this.size)},this.separate=function(t){for(var s=1.1*this.size,i=createVector(),e=0,a=0;a<t.length;a++){var o=p5.Vector.dist(this.pos,t[a].pos);if(0<o&&o<s){var h=p5.Vector.sub(this.pos,t[a].pos);h.normalize(),h.div(o),i.add(h),e++}}if(0<e){i.div(e),i.normalize(),i.mult(2*this.maxSpeed);var r=p5.Vector.sub(i,this.velocity);r.limit(this.maxforce),this.applyForce(r)}},this.applyForce=function(t){var s=t.copy();s.div(this.mass),this.acc.add(s)},this.calculateAttraction=function(t){var s=p5.Vector.sub(this.pos,t.pos),i=s.mag();s.normalize();var e=this.G*this.mass*t.mass/(i*i);return s.mult(e),s},this.applyGravity=function(){for(var t=0;t<attractors.length;t++){var s=attractors[t];if(s.ws===this.atlas.ws){var i=s.calculateAttraction(this);this.applyForce(i)}}}}var text1=new Blotter.Text("Hello",{family:"Overpass Mono",size:120,fill:"#171717"}),text2=new Blotter.Text("Sup",{family:"Overpass Mono",size:120,fill:"#171717"}),material=new Blotter.FliesMaterial,blotter1=new Blotter(material,{texts:text1}),scope1=blotter1.forText(text1);scope1.appendTo(document.body),setTimeout(function(){var t=$(".b-canvas").detach();$(".s00").append(t)},2e3);var cnv,particles=[],limit=10,imgs=[],weaksignals=[],keywords=[],attractors=[],jsonData={},padding=100,grid=3;function preload(){jsonData=loadJSON("../data/fromspreadsheet-1.json"),console.log(jsonData)}var atlasObj=function(t,s){this.kw=s,this.ws=t};function centerCanvas(){cnv=createCanvas(windowWidth,windowHeight);var t=(windowWidth-width)/2,s=(windowHeight-height)/2;cnv.position(t,s)}function windowResized(){centerCanvas()}function setup(){centerCanvas(),setupWeakSignals(),textFont("Overpass Mono"),frameRate(60),weaksignals.forEach(function(e,t){keywords[0].forEach(function(t,s){var i=new atlasObj(e,t);console.log(i),particles.push(new Particle(random(50,width-50),random(50,height-50),{ws:e,kw:t}))})})}function draw(){background("#000");for(var t=0;t<particles.length;t++)particles[t].applyGravity(),particles[t].update(),particles[t].display();fill(100),textSize(32),fill(255),attractors.forEach(function(t){t.update(),t.display()})}function setupWeakSignals(){for(var t in jsonData){var s,i,e,a=[];if(10<jsonData[t].keywords.length){for(var o=0;o<10;o++)s=jsonData[t].keywords,i=Math.floor(Math.random()*s.length),e=s.splice(i,1),a.push(e[0]);jsonData[t].keywords=a.slice()}}o=0;var h=0;for(var t in jsonData)console.log(o,h),attractors.push(new Attractor(jsonData[t].name,o,h)),weaksignals.push(jsonData[t].name),keywords.push(jsonData[t].keywords),$(".s"+o+h).html(jsonData[t].name),2==o&&(h++,o=-1),o++}console.log("hello"+"world".repeat(3));