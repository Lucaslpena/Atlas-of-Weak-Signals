/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
function Particle(x, y, atlasobj) {
  this.pos = createVector(x, y);
  this.vel = createVector(random(-2, 2), random(-2, 2));
  this.acc = createVector(0, -8);
  this.size = 20;
  this.maxSpeed = .3;
  this.maxForce = 1;
  this.theta = 0.0;
  this.atlas = atlasobj;
  this.gifShow = false;
  this.paused = true; // set to true

  this.frozen = true;
  this.itvl = floor(random(200, 1000));

  this.spawn = function () {//     if( (this.img.frame([]) > 100) || (this.img.frame([]) < 5) ){
    //       if (this.gifShow == true) {
    //         //print('finished showing');
    //         this.paused = true;
    //       }
    //       this.gifShow = false; // hidden
    //     } else {
    //       this.gifShow = true; // showing
    //     }
    //     if (this.frozen) {
    //       if( (frameCount % this.itvl) == 0){
    //         //print('thaw');
    //         this.img.play();
    //         this.frozen = false;
    //       }
    //     }
  };

  this.update = function () {
    //deadFIX
    // this.spawn();
    this.vel.add(this.acc);
    this.vel.limit(this.maxSpeed);
    this.pos.add(this.vel);
    this.acc.set(0, 0);
    this.border();
  };

  this.display = function () {
    var theta = this.vel.heading() + radians(90);
    this.theta += this.vel.x * this.vel.mag() / 20;
    var r = 4;
    push();
    translate(this.pos.x, this.pos.y);
    rotate(this.theta); // rect(0,0,10,10);
    // text(this.atlas.kw, 0,0, 100,20);

    text(this.atlas.kw, 0, 0, 200, 200); // if (this.paused) { //paused
    //print('paused');
    //print('frozen');
    // this.paused = false;
    // this.frozen = true;
    // this.img.pause();
    // }
    // if (this.img.loaded()){
    //   image(this.img, this.size/-2, this.size/-2, this.size, this.size);
    // }

    pop();
  };

  this.border = function () {
    if (this.pos.x < -this.size) this.pos.x = width + this.size;
    if (this.pos.y < -this.size) this.pos.y = height + this.size;
    if (this.pos.x > width + this.size) this.pos.x = -this.size;
    if (this.pos.y > height + this.size) this.pos.y = -this.size;
  };

  this.separate = function (vehicles) {
    var desiredseparation = this.size * 1.1;
    var sum = createVector();
    var count = 0;

    for (var i = 0; i < vehicles.length; i++) {
      var d = p5.Vector.dist(this.pos, vehicles[i].pos);

      if (d > 0 && d < desiredseparation) {
        var diff = p5.Vector.sub(this.pos, vehicles[i].pos);
        diff.normalize();
        diff.div(d);
        sum.add(diff);
        count++;
      }
    }

    if (count > 0) {
      sum.div(count);
      sum.normalize();
      sum.mult(this.maxSpeed * 10);
      var steer = p5.Vector.sub(sum, this.velocity);
      steer.limit(this.maxforce);
      this.applyForce(steer);
    }
  };

  this.applyForce = function (force) {
    this.acc.add(force);
  };

  this.applyGravity = function () {
    //ideally this would take obj with its own x,y...
    var wordcord = createVector(width / 2, height / 2);
    var grav = p5.Vector.sub(wordcord, this.pos);
    this.applyForce(grav);
  };
}
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
var particles = [];
var limit = 10;
var imgs = [];
var weaksignals = [];
var keywords = [];

function preload() {}

var cnv;

function centerCanvas() {
  cnv = createCanvas(windowWidth, windowHeight);
  var x = (windowWidth - width) / 2;
  var y = (windowHeight - height) / 2;
  cnv.position(x, y);
}

function windowResized() {
  centerCanvas();
}

function setup() {
  centerCanvas();
  setupWeakSignals(); // textFont("Overpass Mono");
  // for (var i = 0; i < limit; i++) {
  //     var imgLoc = (floor(random(1, imgs.length)) - 1);
  //     var img = imgs[i];
  //     particles.push(new Particle(random(50, width - 50), random(50, height - 50), img));
  // }

  weaksignals.forEach(function (ws, i) {
    keywords[0].forEach(function (kw, i) {
      particles.push(new Particle(random(50, width - 50), random(50, height - 50), {
        ws: ws,
        kw: kw
      }));
    });
  });
}

function draw() {
  background('#000');

  for (var i = 0; i < particles.length; i++) {
    particles[i].applyGravity();
    particles[i].separate(particles);
    particles[i].update();
    particles[i].display();
  }

  fill(100);
  textSize(32); // text("   The Future Is Now", mouseX, mouseY, 600, 200);

  weaksignals.forEach(function (ws) {
    ellipse(width / 2, height / 2, 200, 200);
    fill(255);
    text(ws, width / 2, height / 2, 200, 200); // todo -- create with box and align to center of that box
  });
}

console.log('hello' + 'world'.repeat(3));

function setupWeakSignals() {
  // load from file...
  // into array
  console.log('setup');
  weaksignals.push("Ai Bias");
  keywords.push(["exclusion", "data set", "ai ethics", "manipulation"]);
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnRpY2xlLmpzIiwic2tldGNoLmpzIl0sIm5hbWVzIjpbIlBhcnRpY2xlIiwieCIsInkiLCJhdGxhc29iaiIsInBvcyIsImNyZWF0ZVZlY3RvciIsInZlbCIsInJhbmRvbSIsImFjYyIsInNpemUiLCJtYXhTcGVlZCIsIm1heEZvcmNlIiwidGhldGEiLCJhdGxhcyIsImdpZlNob3ciLCJwYXVzZWQiLCJmcm96ZW4iLCJpdHZsIiwiZmxvb3IiLCJzcGF3biIsInVwZGF0ZSIsImFkZCIsImxpbWl0Iiwic2V0IiwiYm9yZGVyIiwiZGlzcGxheSIsImhlYWRpbmciLCJyYWRpYW5zIiwibWFnIiwiciIsInB1c2giLCJ0cmFuc2xhdGUiLCJyb3RhdGUiLCJ0ZXh0Iiwia3ciLCJwb3AiLCJ3aWR0aCIsImhlaWdodCIsInNlcGFyYXRlIiwidmVoaWNsZXMiLCJkZXNpcmVkc2VwYXJhdGlvbiIsInN1bSIsImNvdW50IiwiaSIsImxlbmd0aCIsImQiLCJwNSIsIlZlY3RvciIsImRpc3QiLCJkaWZmIiwic3ViIiwibm9ybWFsaXplIiwiZGl2IiwibXVsdCIsInN0ZWVyIiwidmVsb2NpdHkiLCJtYXhmb3JjZSIsImFwcGx5Rm9yY2UiLCJmb3JjZSIsImFwcGx5R3Jhdml0eSIsIndvcmRjb3JkIiwiZ3JhdiIsInBhcnRpY2xlcyIsImltZ3MiLCJ3ZWFrc2lnbmFscyIsImtleXdvcmRzIiwicHJlbG9hZCIsImNudiIsImNlbnRlckNhbnZhcyIsImNyZWF0ZUNhbnZhcyIsIndpbmRvd1dpZHRoIiwid2luZG93SGVpZ2h0IiwicG9zaXRpb24iLCJ3aW5kb3dSZXNpemVkIiwic2V0dXAiLCJzZXR1cFdlYWtTaWduYWxzIiwiZm9yRWFjaCIsIndzIiwiZHJhdyIsImJhY2tncm91bmQiLCJmaWxsIiwidGV4dFNpemUiLCJlbGxpcHNlIiwiY29uc29sZSIsImxvZyIsInJlcGVhdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxTQUFTQSxRQUFULENBQWtCQyxDQUFsQixFQUFv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VCxDQUFhTCxRQUFiLENBQXNCd0IsU0FBdEI7QUFDQUEsSUFBQUEsU0FBUyxDQUFDbkIsQ0FBRCxDQUFULENBQWF2QixNQUFiO0FBQ0EwQyxJQUFBQSxTQUFTLENBQUNuQixDQUFELENBQVQsQ0FBYWxCLE9BQWI7QUFDSDs7QUFFRHVELEVBQUFBLElBQUksQ0FBQyxHQUFELENBQUo7QUFDQUMsRUFBQUEsUUFBUSxDQUFDLEVBQUQsQ0FBUixDQVhZLENBWVo7O0FBR0FqQixFQUFBQSxXQUFXLENBQUNZLE9BQVosQ0FBb0IsVUFBU0MsRUFBVCxFQUFZO0FBQzVCSyxJQUFBQSxPQUFPLENBQUM5QyxLQUFLLEdBQUMsQ0FBUCxFQUFVQyxNQUFNLEdBQUMsQ0FBakIsRUFBb0IsR0FBcEIsRUFBeUIsR0FBekIsQ0FBUDtBQUNBMkMsSUFBQUEsSUFBSSxDQUFDLEdBQUQsQ0FBSjtBQUNBL0MsSUFBQUEsSUFBSSxDQUFDNEMsRUFBRCxFQUFLekMsS0FBSyxHQUFDLENBQVgsRUFBY0MsTUFBTSxHQUFDLENBQXJCLEVBQXdCLEdBQXhCLEVBQTZCLEdBQTdCLENBQUosQ0FINEIsQ0FHVztBQUMxQyxHQUpEO0FBS0g7O0FBRUQ4QyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFRLFFBQVFDLE1BQVIsQ0FBZSxDQUFmLENBQXBCOztBQUVBLFNBQVNWLGdCQUFULEdBQTJCO0FBQ3ZCO0FBQ0E7QUFDQVEsRUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksT0FBWjtBQUNBcEIsRUFBQUEsV0FBVyxDQUFDbEMsSUFBWixDQUFpQixTQUFqQjtBQUNBbUMsRUFBQUEsUUFBUSxDQUFDbkMsSUFBVCxDQUFjLENBQUMsV0FBRCxFQUFhLFVBQWIsRUFBeUIsV0FBekIsRUFBc0MsY0FBdEMsQ0FBZDtBQUNIIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBQYXJ0aWNsZSh4LHksIGF0bGFzb2JqKXtcbiAgICB0aGlzLnBvcyA9IGNyZWF0ZVZlY3Rvcih4LCB5KTtcbiAgICB0aGlzLnZlbCA9IGNyZWF0ZVZlY3RvcihyYW5kb20oLTIsMikscmFuZG9tKC0yLDIpKTtcbiAgICB0aGlzLmFjYyA9IGNyZWF0ZVZlY3RvcigwLC04KTtcbiAgICB0aGlzLnNpemUgPSAyMDtcbiAgICB0aGlzLm1heFNwZWVkID0gLjM7XG4gICAgdGhpcy5tYXhGb3JjZSA9IDE7XG4gICAgdGhpcy50aGV0YSA9IDAuMDtcbiAgICB0aGlzLmF0bGFzID0gYXRsYXNvYmo7XG4gICAgdGhpcy5naWZTaG93ID0gZmFsc2U7XG4gICAgdGhpcy5wYXVzZWQgPSB0cnVlOyAvLyBzZXQgdG8gdHJ1ZVxuICAgIHRoaXMuZnJvemVuID0gdHJ1ZTtcbiAgICB0aGlzLml0dmwgPSBmbG9vcihyYW5kb20oMjAwLDEwMDApKTtcblxuXG4gICAgdGhpcy5zcGF3biA9IGZ1bmN0aW9uKCl7XG4vLyAgICAgaWYoICh0aGlzLmltZy5mcmFtZShbXSkgPiAxMDApIHx8ICh0aGlzLmltZy5mcmFtZShbXSkgPCA1KSApe1xuLy8gICAgICAgaWYgKHRoaXMuZ2lmU2hvdyA9PSB0cnVlKSB7XG4vLyAgICAgICAgIC8vcHJpbnQoJ2ZpbmlzaGVkIHNob3dpbmcnKTtcbi8vICAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuLy8gICAgICAgfVxuLy8gICAgICAgdGhpcy5naWZTaG93ID0gZmFsc2U7IC8vIGhpZGRlblxuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICB0aGlzLmdpZlNob3cgPSB0cnVlOyAvLyBzaG93aW5nXG4vLyAgICAgfVxuXG5cbi8vICAgICBpZiAodGhpcy5mcm96ZW4pIHtcbi8vICAgICAgIGlmKCAoZnJhbWVDb3VudCAlIHRoaXMuaXR2bCkgPT0gMCl7XG4vLyAgICAgICAgIC8vcHJpbnQoJ3RoYXcnKTtcbi8vICAgICAgICAgdGhpcy5pbWcucGxheSgpO1xuLy8gICAgICAgICB0aGlzLmZyb3plbiA9IGZhbHNlO1xuLy8gICAgICAgfVxuLy8gICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vZGVhZEZJWFxuICAgICAgICAvLyB0aGlzLnNwYXduKCk7XG4gICAgICAgIHRoaXMudmVsLmFkZCh0aGlzLmFjYyk7XG4gICAgICAgIHRoaXMudmVsLmxpbWl0KHRoaXMubWF4U3BlZWQpO1xuICAgICAgICB0aGlzLnBvcy5hZGQodGhpcy52ZWwpO1xuICAgICAgICB0aGlzLmFjYy5zZXQoMCwwKTtcbiAgICAgICAgdGhpcy5ib3JkZXIoKTtcbiAgICB9XG5cbiAgICB0aGlzLmRpc3BsYXkgPSBmdW5jdGlvbigpe1xuICAgICAgICB2YXIgdGhldGEgPSB0aGlzLnZlbC5oZWFkaW5nKCkgKyByYWRpYW5zKDkwKTtcbiAgICAgICAgdGhpcy50aGV0YSArPSAodGhpcy52ZWwueCAqIHRoaXMudmVsLm1hZygpKSAvIDIwO1xuICAgICAgICB2YXIgciA9IDQ7XG4gICAgICAgIHB1c2goKTtcbiAgICAgICAgdHJhbnNsYXRlKHRoaXMucG9zLngsIHRoaXMucG9zLnkpO1xuICAgICAgICByb3RhdGUodGhpcy50aGV0YSk7XG5cbiAgICAgICAgLy8gcmVjdCgwLDAsMTAsMTApO1xuICAgICAgICAvLyB0ZXh0KHRoaXMuYXRsYXMua3csIDAsMCwgMTAwLDIwKTtcblxuICAgICAgICB0ZXh0KHRoaXMuYXRsYXMua3csIDAsMCwyMDAsMjAwKTtcbiAgICAgICAgLy8gaWYgKHRoaXMucGF1c2VkKSB7IC8vcGF1c2VkXG4gICAgICAgIC8vcHJpbnQoJ3BhdXNlZCcpO1xuICAgICAgICAvL3ByaW50KCdmcm96ZW4nKTtcbiAgICAgICAgLy8gdGhpcy5wYXVzZWQgPSBmYWxzZTtcbiAgICAgICAgLy8gdGhpcy5mcm96ZW4gPSB0cnVlO1xuICAgICAgICAvLyB0aGlzLmltZy5wYXVzZSgpO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIGlmICh0aGlzLmltZy5sb2FkZWQoKSl7XG4gICAgICAgIC8vICAgaW1hZ2UodGhpcy5pbWcsIHRoaXMuc2l6ZS8tMiwgdGhpcy5zaXplLy0yLCB0aGlzLnNpemUsIHRoaXMuc2l6ZSk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgcG9wKCk7XG4gICAgfVxuXG4gICAgdGhpcy5ib3JkZXIgPSBmdW5jdGlvbigpe1xuICAgICAgICBpZiAodGhpcy5wb3MueCA8IC10aGlzLnNpemUpIHRoaXMucG9zLnggPSB3aWR0aCt0aGlzLnNpemU7XG4gICAgICAgIGlmICh0aGlzLnBvcy55IDwgLXRoaXMuc2l6ZSkgdGhpcy5wb3MueSA9IGhlaWdodCt0aGlzLnNpemU7XG4gICAgICAgIGlmICh0aGlzLnBvcy54ID4gd2lkdGgrdGhpcy5zaXplKSB0aGlzLnBvcy54ID0gLXRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKHRoaXMucG9zLnkgPiBoZWlnaHQrdGhpcy5zaXplKSB0aGlzLnBvcy55ID0gLXRoaXMuc2l6ZTtcbiAgICB9XG5cbiAgICB0aGlzLnNlcGFyYXRlID0gZnVuY3Rpb24odmVoaWNsZXMpIHtcbiAgICAgICAgdmFyIGRlc2lyZWRzZXBhcmF0aW9uID0gdGhpcy5zaXplKjEuMTtcbiAgICAgICAgdmFyIHN1bSA9IGNyZWF0ZVZlY3RvcigpO1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlaGljbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZCA9IHA1LlZlY3Rvci5kaXN0KHRoaXMucG9zLCB2ZWhpY2xlc1tpXS5wb3MpO1xuICAgICAgICAgICAgaWYgKChkID4gMCkgJiYgKGQgPCBkZXNpcmVkc2VwYXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHA1LlZlY3Rvci5zdWIodGhpcy5wb3MsIHZlaGljbGVzW2ldLnBvcyk7XG4gICAgICAgICAgICAgICAgZGlmZi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgICBkaWZmLmRpdihkKTtcbiAgICAgICAgICAgICAgICBzdW0uYWRkKGRpZmYpO1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgc3VtLmRpdihjb3VudCk7XG4gICAgICAgICAgICBzdW0ubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBzdW0ubXVsdCh0aGlzLm1heFNwZWVkICogMTApO1xuICAgICAgICAgICAgdmFyIHN0ZWVyID0gcDUuVmVjdG9yLnN1YihzdW0sIHRoaXMudmVsb2NpdHkpO1xuICAgICAgICAgICAgc3RlZXIubGltaXQodGhpcy5tYXhmb3JjZSk7XG4gICAgICAgICAgICB0aGlzLmFwcGx5Rm9yY2Uoc3RlZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuYXBwbHlGb3JjZSA9IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgIHRoaXMuYWNjLmFkZChmb3JjZSk7XG4gICAgfVxuICAgIHRoaXMuYXBwbHlHcmF2aXR5ID0gZnVuY3Rpb24oKXsgLy9pZGVhbGx5IHRoaXMgd291bGQgdGFrZSBvYmogd2l0aCBpdHMgb3duIHgseS4uLlxuICAgICAgICB2YXIgd29yZGNvcmQgPSBjcmVhdGVWZWN0b3Iod2lkdGgvMixoZWlnaHQvMik7XG4gICAgICAgIHZhciBncmF2ID0gcDUuVmVjdG9yLnN1Yih3b3JkY29yZCwgdGhpcy5wb3MpO1xuICAgICAgICB0aGlzLmFwcGx5Rm9yY2UoZ3Jhdik7XG4gICAgfVxufSIsInZhciBwYXJ0aWNsZXMgPSBbXTtcbnZhciBsaW1pdCA9IDEwO1xudmFyIGltZ3MgPSBbXTtcblxudmFyIHdlYWtzaWduYWxzID0gW107XG52YXIga2V5d29yZHMgPSBbXTtcblxuZnVuY3Rpb24gcHJlbG9hZCgpIHtcbn1cblxudmFyIGNudjtcblxuZnVuY3Rpb24gY2VudGVyQ2FudmFzKCkge1xuICAgIGNudiA9IGNyZWF0ZUNhbnZhcyh3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0KTtcbiAgICB2YXIgeCA9ICh3aW5kb3dXaWR0aCAtIHdpZHRoKSAvIDI7XG4gICAgdmFyIHkgPSAod2luZG93SGVpZ2h0IC0gaGVpZ2h0KSAvIDI7XG4gICAgY252LnBvc2l0aW9uKHgsIHkpO1xufVxuXG5mdW5jdGlvbiB3aW5kb3dSZXNpemVkKCkge1xuICAgIGNlbnRlckNhbnZhcygpO1xufVxuXG5mdW5jdGlvbiBzZXR1cCgpIHtcbiAgICBjZW50ZXJDYW52YXMoKTtcbiAgICBzZXR1cFdlYWtTaWduYWxzKCk7XG4gICAgLy8gdGV4dEZvbnQoXCJPdmVycGFzcyBNb25vXCIpO1xuXG4gICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCBsaW1pdDsgaSsrKSB7XG4gICAgLy8gICAgIHZhciBpbWdMb2MgPSAoZmxvb3IocmFuZG9tKDEsIGltZ3MubGVuZ3RoKSkgLSAxKTtcbiAgICAvLyAgICAgdmFyIGltZyA9IGltZ3NbaV07XG4gICAgLy8gICAgIHBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZShyYW5kb20oNTAsIHdpZHRoIC0gNTApLCByYW5kb20oNTAsIGhlaWdodCAtIDUwKSwgaW1nKSk7XG4gICAgLy8gfVxuXG4gICAgd2Vha3NpZ25hbHMuZm9yRWFjaChmdW5jdGlvbih3cywgaSl7XG4gICAgICAgIGtleXdvcmRzWzBdLmZvckVhY2goZnVuY3Rpb24oa3csIGkpe1xuICAgICAgICAgICAgcGFydGljbGVzLnB1c2goXG4gICAgICAgICAgICAgICAgbmV3IFBhcnRpY2xlKHJhbmRvbSg1MCwgd2lkdGggLSA1MCksIHJhbmRvbSg1MCwgaGVpZ2h0IC0gNTApLCB7d3M6IHdzLCBrdzoga3d9KSk7XG4gICAgICAgIH0pO1xuICAgIH0pXG59XG5cbmZ1bmN0aW9uIGRyYXcoKSB7XG4gICAgYmFja2dyb3VuZCgnIzAwMCcpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGFydGljbGVzW2ldLmFwcGx5R3Jhdml0eSgpO1xuICAgICAgICBwYXJ0aWNsZXNbaV0uc2VwYXJhdGUocGFydGljbGVzKTtcbiAgICAgICAgcGFydGljbGVzW2ldLnVwZGF0ZSgpO1xuICAgICAgICBwYXJ0aWNsZXNbaV0uZGlzcGxheSgpO1xuICAgIH1cblxuICAgIGZpbGwoMTAwKTtcbiAgICB0ZXh0U2l6ZSgzMik7XG4gICAgLy8gdGV4dChcIiAgIFRoZSBGdXR1cmUgSXMgTm93XCIsIG1vdXNlWCwgbW91c2VZLCA2MDAsIDIwMCk7XG5cblxuICAgIHdlYWtzaWduYWxzLmZvckVhY2goZnVuY3Rpb24od3Mpe1xuICAgICAgICBlbGxpcHNlKHdpZHRoLzIsIGhlaWdodC8yLCAyMDAsIDIwMCk7XG4gICAgICAgIGZpbGwoMjU1KTtcbiAgICAgICAgdGV4dCh3cywgd2lkdGgvMiwgaGVpZ2h0LzIsIDIwMCwgMjAwKTsgLy8gdG9kbyAtLSBjcmVhdGUgd2l0aCBib3ggYW5kIGFsaWduIHRvIGNlbnRlciBvZiB0aGF0IGJveFxuICAgIH0pO1xufVxuXG5jb25zb2xlLmxvZygnaGVsbG8nKyd3b3JsZCcucmVwZWF0KDMpKTtcblxuZnVuY3Rpb24gc2V0dXBXZWFrU2lnbmFscygpe1xuICAgIC8vIGxvYWQgZnJvbSBmaWxlLi4uXG4gICAgLy8gaW50byBhcnJheVxuICAgIGNvbnNvbGUubG9nKCdzZXR1cCcpO1xuICAgIHdlYWtzaWduYWxzLnB1c2goXCJBaSBCaWFzXCIpO1xuICAgIGtleXdvcmRzLnB1c2goW1wiZXhjbHVzaW9uXCIsXCJkYXRhIHNldFwiLCBcImFpIGV0aGljc1wiLCBcIm1hbmlwdWxhdGlvblwiXSk7XG59Il19
