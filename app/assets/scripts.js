/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
function Attractor(weaksignal, xCord, yCord) {
  this.ws = weaksignal;
  var length = width - 2 * padding;
  var interval = length / grid;
  var centerX = padding + interval * (xCord + 1);
  centerX = centerX - interval / 2;
  length = height - 2 * padding;
  interval = length / grid;
  var centerY = padding + interval * (yCord + 1);
  centerY = centerY - interval / 2;
  this.pos = createVector(centerX, centerY);
  this.vel = createVector(0, 0);
  this.acc = createVector(0, 0);
  this.mass = 6;
  this.G = 20; //was 80

  this.scaler = 5;

  this.calculateAttraction = function (p) {
    //calculate direction of force
    var force = p5.Vector.sub(this.pos, p.pos); //distance between objects

    var distance = force.mag(); //limit vector to eliminate extreme values at very close or very far
    // distance = constrain(distance,20,25);

    distance = constrain(distance, 50, 55); //Not really important but is what it is to get direction

    force.normalize(); //calculate gravitational from magniitude

    var strength = this.G * this.mass * p.mass / (distance * distance); //get force vector --> magnitude * direction

    force.mult(strength); //var force;

    return force;
  };

  this.applyForce = function (force) {
    // A = F /M
    var f = force.copy();
    f.div(this.mass);
    this.acc.add(f);
  };

  this.update = function () {
    this.edges();
    this.vel.add(this.acc);
    this.pos.add(this.vel);
    this.acc.set(0, 0);
  };

  this.display = function () {
    push(); // fill(30,25,20);

    stroke(30, 25, 30); // ellipse(this.pos.x, this.pos.y, this.mass * this.scaler, this.mass * this.scaler);
    // fill(30,25,20);

    textAlign(CENTER, CENTER); // text(this.ws, this.pos.x, this.pos.y);

    pop();
  };

  this.edges = function () {
    if (this.pos.y > height) {
      this.vel.y *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }

    if (this.pos.x > width) {
      this.vel.x *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }

    if (this.pos.x < 0) {
      this.vel.x *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }

    if (this.pos.y < 0) {
      this.vel.x *= -1;
      this.pos = createVector(width / 2, height / 2);
      this.vel = createVector(0, 0);
    }
  };
}
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
function Particle(x, y, a) {
  this.atlas = a;
  this.pos = createVector(x, y);
  this.vel = createVector(random(-3, 3), random(-3, 3));
  this.acc = createVector(0, -8); // this.vel = createVector(0,0);
  // this.acc = createVector(0,0);

  this.mass = 10;
  this.G = 5;
  this.previousVel = createVector(0, 0);
  this.maxSpeed = 3;
  this.theta = 0.0;
  this.size = 20; // this.maxForce = 1;

  this.history = [];

  this.update = function () {
    this.edges();
    this.vel.add(this.acc);
    this.vel.limit(this.maxSpeed);
    this.pos.add(this.vel);
    this.acc.set(0, 0);

    if (frameCount % 10 == 1) {
      var v = createVector(this.pos.x, this.pos.y);
      this.history.push(v);

      if (this.history.length > 8) {
        this.history.splice(0, 1);
      } // console.log(this.pos);
      // console.log("current ^ last v");
      // console.log(this.history);

    }
  };

  this.display = function () {
    this.trailing();
    var theta = this.vel.heading() + radians(90);
    this.theta += this.vel.x * this.vel.mag() / 20;
    var r = 4;
    push();
    translate(this.pos.x, this.pos.y); // rotate(this.theta);

    textAlign(CENTER, CENTER);
    textSize(8);
    text(this.atlas.kw, 0, 0);
    pop();
  };

  this.trailing = function () {
    for (var i = 0; i < this.history.length; i++) {
      var pos = this.history[i];
      push();
      translate(pos.x, pos.y);
      stroke(100);
      fill(225);
      point(0, 0);
      pop();
    }
  };

  this.edges = function () {
    if (this.pos.x < -this.size) this.pos.x = width + this.size;
    if (this.pos.y < -this.size) this.pos.y = height + this.size;
    if (this.pos.x > width + this.size) this.pos.x = -this.size;
    if (this.pos.y > height + this.size) this.pos.y = -this.size;
  };

  this.separate = function (vehicles) {
    var desiredseparation = this.size * 1.1;
    var sum = createVector();
    var count = 0;

    for (var i = 0; i < vehicles.length; i++) {
      var d = p5.Vector.dist(this.pos, vehicles[i].pos);

      if (d > 0 && d < desiredseparation) {
        var diff = p5.Vector.sub(this.pos, vehicles[i].pos);
        diff.normalize();
        diff.div(d);
        sum.add(diff);
        count++;
      }
    }

    if (count > 0) {
      sum.div(count);
      sum.normalize();
      sum.mult(this.maxSpeed * 2);
      var steer = p5.Vector.sub(sum, this.velocity);
      steer.limit(this.maxforce);
      this.applyForce(steer);
    }
  };

  this.applyForce = function (force) {
    var f = force.copy();
    f.div(this.mass);
    this.acc.add(f);
  }; //calculate attraction


  this.calculateAttraction = function (obj) {
    //calculate direction of force
    var force = p5.Vector.sub(this.pos, obj.pos); //distance between objects

    var distance = force.mag(); //limit vector to eliminate extreme values at very close or very far
    //distance = constrain(distance,20,25);
    //Not really important but is what it is to get direction

    force.normalize(); //calculate gravitational from magniitude

    var strength = this.G * this.mass * obj.mass / (distance * distance); //get force vector --> magnitude * direction

    force.mult(strength); //var force;

    return force;
  };

  this.applyGravity = function () {
    for (var i = 0; i < attractors.length; i++) {
      var a = attractors[i];

      if (a.ws === this.atlas.ws) {
        //get everyone applied to and attract to it
        // console.log('attracted to: ' + a.ws);
        var f = a.calculateAttraction(this); // console.log(f);

        this.applyForce(f);
      }
    }
  };
}
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
var text1 = new Blotter.Text("under construction üëÅ‚Äçüó®", {
  family: "Overpass Mono",
  size: 84,
  fill: "#171717"
});
var text2 = new Blotter.Text("Sup", {
  family: "Overpass Mono",
  size: 120,
  fill: "#171717"
});
var material = new Blotter.ChannelSplitMaterial();
var blotter1 = new Blotter(material, {
  texts: text1
});
var scope1 = blotter1.forText(text1);
scope1.appendTo(document.body); // var blotter2 = new Blotter(material, { texts : text2 });
// var scope2 = blotter2.forText(text2);
// scope2.appendTo(document.body);

setTimeout(function () {
  var element = $('.b-canvas').detach(); // $('.s00').append(element);
}, 2000); //https://codepen.io/SimonEvans/pen/PQKgyQ
// https://github.com/bradley/blotter
// https://blotter.js.org/#/documentation
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
var particles = [];
var limit = 10;
var imgs = [];
var weaksignals = [];
var keywords = [];
var attractors = [];
var jsonData = {};
var padding = 100;
var grid = 5;

function preload() {
  var jsonFile = "../data/fromspreadsheet.json";
  jsonData = loadJSON(jsonFile);
  console.log(jsonData);
}

var cnv;

var atlasObj = function (weaksignal, keyword) {
  this.kw = keyword;
  this.ws = weaksignal;
};

function centerCanvas() {
  cnv = createCanvas(windowWidth, windowHeight);
  var x = (windowWidth - width) / 2;
  var y = (windowHeight - height) / 2;
  cnv.position(x, y);
}

function windowResized() {
  centerCanvas();
}

function setup() {
  centerCanvas();
  setupWeakSignals();
  textFont("Overpass Mono");
  frameRate(60);
  weaksignals.forEach(function (ws, i) {
    keywords[i].forEach(function (kw, j) {
      var atls = new atlasObj(ws, kw);
      console.log(atls);
      particles.push(new Particle(random(50, width - 50), random(50, height - 50), {
        ws: ws,
        kw: kw
      }));
    });
  });
}

function draw() {
  // background('#ffffff');
  clear();

  for (var i = 0; i < particles.length; i++) {
    particles[i].applyGravity(); // particles[i].separate(particles);
    // particles[i].separate(attractors);

    particles[i].update();
    particles[i].display();
  }

  textSize(14);
  fill(0);
  attractors.forEach(function (a) {
    a.update();
    a.display();
  });
}

console.log('hello' + 'world'.repeat(3));

function setupWeakSignals() {
  //clipping keyword list to random selected words until wordCount reached
  for (var i in jsonData) {
    var wordCount = 5;
    var items, index, item;

    if (jsonData[i]["keywords"].length > wordCount) {
      var newItems = [];

      for (var j = 0; j < wordCount; j++) {
        items = jsonData[i]["keywords"];
        index = Math.floor(Math.random() * items.length);
        item = items.splice(index, 1);
        newItems.push(item[0]); // console.log(item[0]);
      }

      console.log(newItems);
      jsonData[i]["keywords"] = newItems.slice();
    }
  } // console.log(jsonData);
  // console.log('setup');
  // console.log(jsonData);


  var j = 0,
      k = 0;

  for (var i in jsonData) {
    console.log(j, k);
    attractors.push(new Attractor(jsonData[i]["name"], j, k));
    weaksignals.push(jsonData[i]["name"]);
    keywords.push(jsonData[i]["keywords"]);
    $(".s" + j + k).html(jsonData[i]["name"]);

    if (j == grid - 1) {
      k++;
      j = -1;
    }

    j++;
  } // console.log(weaksignals)
  // 3 * 3 grid

}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF0dHJhY3Rvci5qcyIsInBhcnRpY2xlLmpzIiwic2NyaXB0LmpzIiwic2tldGNoLmpzIl0sIm5hbWVzIjpbIkF0dHJhY3RvciIsIndlYWtzaWduYWwiLCJ4Q29yZCIsInlDb3JkIiwid3MiLCJsZW5ndGgiLCJ3aWR0aCIsInBhZGRpbmciLCJpbnRlcnZhbCIsImdyaWQiLCJjZW50ZXJYIiwiaGVpZ2h0IiwiY2VudGVyWSIsInBvcyIsImNyZWF0ZVZlY3RvciIsInZlbCIsImFjYyIsIm1hc3MiLCJHIiwic2NhbGVyIiwiY2FsY3VsYXRlQXR0cmFjdGlvbiIsInAiLCJmb3JjZSIsInA1IiwiVmVjdG9yIiwic3ViIiwiZGlzdGFuY2UiLCJtYWciLCJjb25zdHJhaW4iLCJub3JtYWxpemUiLCJzdHJlbmd0aCIsIm11bHQiLCJhcHBseUZvcmNlIiwiZiIsImNvcHkiLCJkaXYiLCJhZGQiLCJ1cGRhdGUiLCJlZGdlcyIsInNldCIsImRpc3BsYXkiLCJwdXNoIiwic3Ryb2tlIiwidGV4dEFsaWduIiwiQ0VOVEVSIiwicG9wIiwieSIsIngiLCJQYXJ0aWNsZSIsImEiLCJhdGxhcyIsInJhbmRvbSIsInByZXZpb3VzVmVsIiwibWF4U3BlZWQiLCJ0aGV0YSIsInNpemUiLCJoaXN0b3J5IiwibGltaXQiLCJmcmFtZUNvdW50IiwidiIsInNwbGljZSIsInRyYWlsaW5nIiwiaGVhZGluZyIsInJhZGlhbnMiLCJyIiwidHJhbnNsYXRlIiwidGV4dFNpemUiLCJ0ZXh0Iiwia3ciLCJpIiwiZmlsbCIsInBvaW50Iiwic2VwYXJhdGUiLCJ2ZWhpY2xlcyIsImRlc2lyZWRzZXBhcmF0aW9uIiwic3VtIiwiY291bnQiLCJkIiwiZGlzdCIsImRpZmYiLCJzdGVlciIsInZlbG9jaXR5IiwibWF4Zm9yY2UiLCJvYmoiLCJhcHBseUdyYXZpdHkiLCJhdHRyYWN0b3JzIiwidGV4dDEiLCJCbG90dGVyIiwiVGV4dCIsImZhbWlseSIsInRleHQyIiwibWF0ZXJpYWwiLCJDaGFubmVsU3BsaXRNYXRlcmlhbCIsImJsb3R0ZXIxIiwidGV4dHMiLCJzY29wZTEiLCJmb3JUZXh0IiwiYXBwZW5kVG8iLCJkb2N1bWVudCIsImJvZHkiLCJzZXRUaW1lb3V0IiwiZWxlbWVudCIsIiQiLCJkZXRhY2giLCJwYXJ0aWNsZXMiLCJpbWdzIiwid2Vha3NpZ25hbHMiLCJrZXl3b3JkcyIsImpzb25EYXRhIiwicHJlbG9hZCIsImpzb25GaWxlIiwibG9hZEpTT04iLCJjb25zb2xlIiwibG9nIiwiY252IiwiYXRsYXNPYmoiLCJrZXl3b3JkIiwiY2VudGVyQ2FudmFzIiwiY3JlYXRlQ2FudmFzIiwid2luZG93V2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJwb3NpdGlvbiIsIndpbmRvd1Jlc2l6ZWQiLCJzZXR1cCIsInNldHVwV2Vha1NpZ25hbHMiLCJ0ZXh0Rm9udCIsImZyYW1lUmF0ZSIsImZvckVhY2giLCJqIiwiYXRscyIsImRyYXciLCJjbGVhciIsInJlcGVhdCIsIndvcmRDb3VudCIsIml0ZW1zIiwiaW5kZXgiLCJpdGVtIiwibmV3SXRlbXMiLCJNYXRoIiwiZmxvb3IiLCJzbGljZSIsImsiLCJodG1sIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLFNBQVNBLFNBQVQsQ0FBbUJDLFVBQW5CLEVBQStCQyxLQUEvQixFQUFzQ0MsS0FBdEMsRUFBNkM7QUFDekMsT0FBS0MsRUFBTCxHQUFVSCxVQUFWO0FBQ0EsTUFBSUksTUFBTSxHQUFHQyxLQUFLLEdBQUcsSUFBRUMsT0FBdkI7QUFDQSxNQUFJQyxRQUFRLEdBQUlILE1BQU0sR0FBR0ksSUFBekI7QUFDQSxNQUFJQyxPQUFPLEdBQUdILE9BQU8sR0FBR0MsUUFBUSxJQUFJTixLQUFLLEdBQUMsQ0FBVixDQUFoQztBQUNBUSxFQUFBQSxPQUFPLEdBQUdBLE9BQU8sR0FBR0YsUUFBUSxHQUFDLENBQTdCO0FBQ0FILEVBQUFBLE1BQU0sR0FBR00sTUFBTSxHQUFHLElBQUVKLE9BQXBCO0FBQ0FDLEVBQUFBLFFBQVEsR0FBSUgsTUFBTSxHQUFHSSxJQUFyQjtB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NEcsUUFBUSxDQUFDdkMsQ0FBRCxDQUFSLENBQVksTUFBWixDQUFkLEVBQW1DMkQsQ0FBbkMsRUFBc0NhLENBQXRDLENBQWhCO0FBQ0FuQyxJQUFBQSxXQUFXLENBQUNqRSxJQUFaLENBQWlCbUUsUUFBUSxDQUFDdkMsQ0FBRCxDQUFSLENBQVksTUFBWixDQUFqQjtBQUNBc0MsSUFBQUEsUUFBUSxDQUFDbEUsSUFBVCxDQUFjbUUsUUFBUSxDQUFDdkMsQ0FBRCxDQUFSLENBQVksVUFBWixDQUFkO0FBQ0FpQyxJQUFBQSxDQUFDLENBQUUsT0FBTzBCLENBQVIsR0FBV2EsQ0FBWixDQUFELENBQWdCQyxJQUFoQixDQUFxQmxDLFFBQVEsQ0FBQ3ZDLENBQUQsQ0FBUixDQUFZLE1BQVosQ0FBckI7O0FBQ0EsUUFBSTJELENBQUMsSUFBS3ZILElBQUksR0FBQyxDQUFmLEVBQWtCO0FBQ2RvSSxNQUFBQSxDQUFDO0FBQ0RiLE1BQUFBLENBQUMsR0FBRyxDQUFDLENBQUw7QUFDSDs7QUFDREEsSUFBQUEsQ0FBQztBQUNKLEdBckNzQixDQXVDdkI7QUFDQTs7QUFDSCIsImZpbGUiOiJzY3JpcHRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gQXR0cmFjdG9yKHdlYWtzaWduYWwsIHhDb3JkLCB5Q29yZCkge1xuICAgIHRoaXMud3MgPSB3ZWFrc2lnbmFsO1xuICAgIHZhciBsZW5ndGggPSB3aWR0aCAtIDIqcGFkZGluZztcbiAgICB2YXIgaW50ZXJ2YWwgPSAobGVuZ3RoIC8gZ3JpZCk7XG4gICAgdmFyIGNlbnRlclggPSBwYWRkaW5nICsgaW50ZXJ2YWwgKiAoeENvcmQrMSk7XG4gICAgY2VudGVyWCA9IGNlbnRlclggLSBpbnRlcnZhbC8yO1xuICAgIGxlbmd0aCA9IGhlaWdodCAtIDIqcGFkZGluZztcbiAgICBpbnRlcnZhbCA9IChsZW5ndGggLyBncmlkKTtcbiAgICB2YXIgY2VudGVyWSA9IHBhZGRpbmcgKyBpbnRlcnZhbCAqICh5Q29yZCsxKTtcbiAgICBjZW50ZXJZID0gY2VudGVyWSAtIGludGVydmFsLzI7XG5cbiAgICB0aGlzLnBvcyA9IGNyZWF0ZVZlY3RvcihjZW50ZXJYLCBjZW50ZXJZKTtcbiAgICB0aGlzLnZlbCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICAgIHRoaXMuYWNjID0gY3JlYXRlVmVjdG9yKDAsMCk7XG5cbiAgICB0aGlzLm1hc3MgPSA2O1xuICAgIHRoaXMuRyA9IDIwOyAvL3dhcyA4MFxuICAgIHRoaXMuc2NhbGVyID0gNTtcblxuICAgIHRoaXMuY2FsY3VsYXRlQXR0cmFjdGlvbiA9IGZ1bmN0aW9uKHApe1xuICAgICAgICAvL2NhbGN1bGF0ZSBkaXJlY3Rpb24gb2YgZm9yY2VcbiAgICAgICAgdmFyIGZvcmNlID0gcDUuVmVjdG9yLnN1Yih0aGlzLnBvcywgcC5wb3MpO1xuXG4gICAgICAgIC8vZGlzdGFuY2UgYmV0d2VlbiBvYmplY3RzXG4gICAgICAgIHZhciBkaXN0YW5jZSA9IGZvcmNlLm1hZygpO1xuXG4gICAgICAgIC8vbGltaXQgdmVjdG9yIHRvIGVsaW1pbmF0ZSBleHRyZW1lIHZhbHVlcyBhdCB2ZXJ5IGNsb3NlIG9yIHZlcnkgZmFyXG4gICAgICAgIC8vIGRpc3RhbmNlID0gY29uc3RyYWluKGRpc3RhbmNlLDIwLDI1KTtcbiAgICAgICAgZGlzdGFuY2UgPSBjb25zdHJhaW4oZGlzdGFuY2UsNTAsNTUpO1xuICAgICAgICAvL05vdCByZWFsbHkgaW1wb3J0YW50IGJ1dCBpcyB3aGF0IGl0IGlzIHRvIGdldCBkaXJlY3Rpb25cbiAgICAgICAgZm9yY2Uubm9ybWFsaXplKCk7XG5cbiAgICAgICAgLy9jYWxjdWxhdGUgZ3Jhdml0YXRpb25hbCBmcm9tIG1hZ25paXR1ZGVcbiAgICAgICAgdmFyIHN0cmVuZ3RoID0gKHRoaXMuRyAqIHRoaXMubWFzcyAqIHAubWFzcykgLyAoZGlzdGFuY2UgKiBkaXN0YW5jZSk7XG5cbiAgICAgICAgLy9nZXQgZm9yY2UgdmVjdG9yIC0tPiBtYWduaXR1ZGUgKiBkaXJlY3Rpb25cbiAgICAgICAgZm9yY2UubXVsdChzdHJlbmd0aCk7XG4gICAgICAgIC8vdmFyIGZvcmNlO1xuICAgICAgICByZXR1cm4gZm9yY2U7XG4gICAgfVxuXG4gICAgdGhpcy5hcHBseUZvcmNlID0gZnVuY3Rpb24oZm9yY2Upe1xuICAgICAgICAvLyBBID0gRiAvTVxuICAgICAgICB2YXIgZiA9IGZvcmNlLmNvcHkoKTtcbiAgICAgICAgZi5kaXYodGhpcy5tYXNzKTtcbiAgICAgICAgdGhpcy5hY2MuYWRkKGYpO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5lZGdlcygpO1xuICAgICAgICB0aGlzLnZlbC5hZGQodGhpcy5hY2MpO1xuICAgICAgICB0aGlzLnBvcy5hZGQodGhpcy52ZWwpO1xuICAgICAgICB0aGlzLmFjYy5zZXQoMCwwKTtcbiAgICB9XG5cbiAgICB0aGlzLmRpc3BsYXkgPSBmdW5jdGlvbigpe1xuICAgICAgICBwdXNoKCk7XG4gICAgICAgIC8vIGZpbGwoMzAsMjUsMjApO1xuICAgICAgICBzdHJva2UoMzAsMjUsMzApO1xuICAgICAgICAvLyBlbGxpcHNlKHRoaXMucG9zLngsIHRoaXMucG9zLnksIHRoaXMubWFzcyAqIHRoaXMuc2NhbGVyLCB0aGlzLm1hc3MgKiB0aGlzLnNjYWxlcik7XG4gICAgICAgIC8vIGZpbGwoMzAsMjUsMjApO1xuICAgICAgICB0ZXh0QWxpZ24oQ0VOVEVSLCBDRU5URVIpO1xuICAgICAgICAvLyB0ZXh0KHRoaXMud3MsIHRoaXMucG9zLngsIHRoaXMucG9zLnkpO1xuICAgICAgICBwb3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLmVkZ2VzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKHRoaXMucG9zLnkgPiBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMudmVsLnkgKj0gLTE7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGNyZWF0ZVZlY3Rvcih3aWR0aC8yLCBoZWlnaHQvMik7XG4gICAgICAgICAgICB0aGlzLnZlbCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcy54ID4gd2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMudmVsLnggKj0gLTE7XG4gICAgICAgICAgICB0aGlzLnBvcyA9IGNyZWF0ZVZlY3Rvcih3aWR0aC8yLCBoZWlnaHQvMik7XG4gICAgICAgICAgICB0aGlzLnZlbCA9IGNyZWF0ZVZlY3RvcigwLDApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcy54IDwgMCkge1xuICAgICAgICAgICAgdGhpcy52ZWwueCAqPSAtMTtcbiAgICAgICAgICAgIHRoaXMucG9zID0gY3JlYXRlVmVjdG9yKHdpZHRoLzIsIGhlaWdodC8yKTtcbiAgICAgICAgICAgIHRoaXMudmVsID0gY3JlYXRlVmVjdG9yKDAsMCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucG9zLnkgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLnZlbC54ICo9IC0xO1xuICAgICAgICAgICAgdGhpcy5wb3MgPSBjcmVhdGVWZWN0b3Iod2lkdGgvMiwgaGVpZ2h0LzIpO1xuICAgICAgICAgICAgdGhpcy52ZWwgPSBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgICAgICAgfVxuICAgIH1cblxufSIsImZ1bmN0aW9uIFBhcnRpY2xlKHgseSxhKXtcbiAgICB0aGlzLmF0bGFzID0gYTtcblxuICAgIHRoaXMucG9zID0gY3JlYXRlVmVjdG9yKHgsIHkpO1xuICAgIHRoaXMudmVsID0gY3JlYXRlVmVjdG9yKHJhbmRvbSgtMywzKSxyYW5kb20oLTMsMykpO1xuICAgIHRoaXMuYWNjID0gY3JlYXRlVmVjdG9yKDAsLTgpO1xuXG4gICAgLy8gdGhpcy52ZWwgPSBjcmVhdGVWZWN0b3IoMCwwKTtcbiAgICAvLyB0aGlzLmFjYyA9IGNyZWF0ZVZlY3RvcigwLDApO1xuXG4gICAgdGhpcy5tYXNzID0gMTA7XG4gICAgdGhpcy5HID0gNTtcbiAgICB0aGlzLnByZXZpb3VzVmVsID0gY3JlYXRlVmVjdG9yKDAsMCk7XG4gICAgdGhpcy5tYXhTcGVlZCA9IDM7XG5cbiAgICB0aGlzLnRoZXRhID0gMC4wO1xuICAgIHRoaXMuc2l6ZSA9IDIwO1xuICAgIC8vIHRoaXMubWF4Rm9yY2UgPSAxO1xuXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XG5cblxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5lZGdlcygpO1xuICAgICAgICB0aGlzLnZlbC5hZGQodGhpcy5hY2MpO1xuICAgICAgICB0aGlzLnZlbC5saW1pdCh0aGlzLm1heFNwZWVkKTtcbiAgICAgICAgdGhpcy5wb3MuYWRkKHRoaXMudmVsKTtcbiAgICAgICAgdGhpcy5hY2Muc2V0KDAsMCk7XG5cblxuICAgICAgICBpZiAoZnJhbWVDb3VudCAlIDEwID09IDEpe1xuICAgICAgICAgICAgdmFyIHYgPSBjcmVhdGVWZWN0b3IodGhpcy5wb3MueCwgdGhpcy5wb3MueSk7XG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaCh2KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gOCl7XG4gICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnNwbGljZSgwLDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wb3MpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJjdXJyZW50IF4gbGFzdCB2XCIpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5oaXN0b3J5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZGlzcGxheSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMudHJhaWxpbmcoKTtcbiAgICAgICAgdmFyIHRoZXRhID0gdGhpcy52ZWwuaGVhZGluZygpICsgcmFkaWFucyg5MCk7XG4gICAgICAgIHRoaXMudGhldGEgKz0gKHRoaXMudmVsLnggKiB0aGlzLnZlbC5tYWcoKSkgLyAyMDtcbiAgICAgICAgdmFyIHIgPSA0O1xuICAgICAgICBwdXNoKCk7XG4gICAgICAgIHRyYW5zbGF0ZSh0aGlzLnBvcy54LCB0aGlzLnBvcy55KTtcbiAgICAgICAgLy8gcm90YXRlKHRoaXMudGhldGEpO1xuICAgICAgICB0ZXh0QWxpZ24oQ0VOVEVSLCBDRU5URVIpO1xuICAgICAgICB0ZXh0U2l6ZSg4KTtcbiAgICAgICAgdGV4dCh0aGlzLmF0bGFzLmt3LCAwLDApO1xuICAgICAgICBwb3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLnRyYWlsaW5nID0gZnVuY3Rpb24oKXtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmhpc3RvcnkubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgdmFyIHBvcyA9IHRoaXMuaGlzdG9yeVtpXTtcbiAgICAgICAgICAgIHB1c2goKTtcbiAgICAgICAgICAgIHRyYW5zbGF0ZShwb3MueCwgcG9zLnkpO1xuICAgICAgICAgICAgc3Ryb2tlKDEwMCk7XG4gICAgICAgICAgICBmaWxsKDIyNSk7XG5cbiAgICAgICAgICAgIHBvaW50KDAsMCk7XG4gICAgICAgICAgICBwb3AoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuZWRnZXMgPSBmdW5jdGlvbigpe1xuICAgICAgICBpZiAodGhpcy5wb3MueCA8IC10aGlzLnNpemUpIHRoaXMucG9zLnggPSB3aWR0aCt0aGlzLnNpemU7XG4gICAgICAgIGlmICh0aGlzLnBvcy55IDwgLXRoaXMuc2l6ZSkgdGhpcy5wb3MueSA9IGhlaWdodCt0aGlzLnNpemU7XG4gICAgICAgIGlmICh0aGlzLnBvcy54ID4gd2lkdGgrdGhpcy5zaXplKSB0aGlzLnBvcy54ID0gLXRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKHRoaXMucG9zLnkgPiBoZWlnaHQrdGhpcy5zaXplKSB0aGlzLnBvcy55ID0gLXRoaXMuc2l6ZTtcbiAgICB9XG5cbiAgICB0aGlzLnNlcGFyYXRlID0gZnVuY3Rpb24odmVoaWNsZXMpIHtcbiAgICAgICAgdmFyIGRlc2lyZWRzZXBhcmF0aW9uID0gdGhpcy5zaXplKjEuMTtcbiAgICAgICAgdmFyIHN1bSA9IGNyZWF0ZVZlY3RvcigpO1xuICAgICAgICB2YXIgY291bnQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZlaGljbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZCA9IHA1LlZlY3Rvci5kaXN0KHRoaXMucG9zLCB2ZWhpY2xlc1tpXS5wb3MpO1xuICAgICAgICAgICAgaWYgKChkID4gMCkgJiYgKGQgPCBkZXNpcmVkc2VwYXJhdGlvbikpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZiA9IHA1LlZlY3Rvci5zdWIodGhpcy5wb3MsIHZlaGljbGVzW2ldLnBvcyk7XG4gICAgICAgICAgICAgICAgZGlmZi5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgICAgICBkaWZmLmRpdihkKTtcbiAgICAgICAgICAgICAgICBzdW0uYWRkKGRpZmYpO1xuICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgc3VtLmRpdihjb3VudCk7XG4gICAgICAgICAgICBzdW0ubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBzdW0ubXVsdCh0aGlzLm1heFNwZWVkICogMik7XG4gICAgICAgICAgICB2YXIgc3RlZXIgPSBwNS5WZWN0b3Iuc3ViKHN1bSwgdGhpcy52ZWxvY2l0eSk7XG4gICAgICAgICAgICBzdGVlci5saW1pdCh0aGlzLm1heGZvcmNlKTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlGb3JjZShzdGVlcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFwcGx5Rm9yY2UgPSBmdW5jdGlvbihmb3JjZSkge1xuICAgICAgICB2YXIgZiA9IGZvcmNlLmNvcHkoKTtcbiAgICAgICAgZi5kaXYodGhpcy5tYXNzKTtcbiAgICAgICAgdGhpcy5hY2MuYWRkKGYpO1xuICAgIH1cblxuICAgIC8vY2FsY3VsYXRlIGF0dHJhY3Rpb25cbiAgICB0aGlzLmNhbGN1bGF0ZUF0dHJhY3Rpb24gPSBmdW5jdGlvbihvYmope1xuICAgICAgICAvL2NhbGN1bGF0ZSBkaXJlY3Rpb24gb2YgZm9yY2VcbiAgICAgICAgdmFyIGZvcmNlID0gcDUuVmVjdG9yLnN1Yih0aGlzLnBvcywgb2JqLnBvcyk7XG5cbiAgICAgICAgLy9kaXN0YW5jZSBiZXR3ZWVuIG9iamVjdHNcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gZm9yY2UubWFnKCk7XG4gICAgICAgIC8vbGltaXQgdmVjdG9yIHRvIGVsaW1pbmF0ZSBleHRyZW1lIHZhbHVlcyBhdCB2ZXJ5IGNsb3NlIG9yIHZlcnkgZmFyXG4gICAgICAgIC8vZGlzdGFuY2UgPSBjb25zdHJhaW4oZGlzdGFuY2UsMjAsMjUpO1xuICAgICAgICAvL05vdCByZWFsbHkgaW1wb3J0YW50IGJ1dCBpcyB3aGF0IGl0IGlzIHRvIGdldCBkaXJlY3Rpb25cbiAgICAgICAgZm9yY2Uubm9ybWFsaXplKCk7XG5cbiAgICAgICAgLy9jYWxjdWxhdGUgZ3Jhdml0YXRpb25hbCBmcm9tIG1hZ25paXR1ZGVcbiAgICAgICAgdmFyIHN0cmVuZ3RoID0gKHRoaXMuRyAqIHRoaXMubWFzcyAqIG9iai5tYXNzKSAvIChkaXN0YW5jZSAqIGRpc3RhbmNlKTtcblxuICAgICAgICAvL2dldCBmb3JjZSB2ZWN0b3IgLS0+IG1hZ25pdHVkZSAqIGRpcmVjdGlvblxuICAgICAgICBmb3JjZS5tdWx0KHN0cmVuZ3RoKTtcbiAgICAgICAgLy92YXIgZm9yY2U7XG4gICAgICAgIHJldHVybiBmb3JjZTtcbiAgICB9XG5cbiAgICB0aGlzLmFwcGx5R3Jhdml0eSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmFjdG9ycy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICB2YXIgYSA9IGF0dHJhY3RvcnNbaV07XG4gICAgICAgICAgICBpZiAoYS53cyA9PT0gdGhpcy5hdGxhcy53cyl7IC8vZ2V0IGV2ZXJ5b25lIGFwcGxpZWQgdG8gYW5kIGF0dHJhY3QgdG8gaXRcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYXR0cmFjdGVkIHRvOiAnICsgYS53cyk7XG4gICAgICAgICAgICAgICAgdmFyIGYgPSBhLmNhbGN1bGF0ZUF0dHJhY3Rpb24odGhpcyk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZik7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUZvcmNlKGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG59IiwidmFyIHRleHQxID0gbmV3IEJsb3R0ZXIuVGV4dChcInVuZGVyIGNvbnN0cnVjdGlvbiDwn5GB4oCN8J+XqFwiLCB7XG4gICAgZmFtaWx5IDogXCJPdmVycGFzcyBNb25vXCIsXG4gICAgc2l6ZSA6IDg0LFxuICAgIGZpbGwgOiBcIiMxNzE3MTdcIlxufSk7XG5cbnZhciB0ZXh0MiA9IG5ldyBCbG90dGVyLlRleHQoXCJTdXBcIiwge1xuICAgIGZhbWlseSA6IFwiT3ZlcnBhc3MgTW9ub1wiLFxuICAgIHNpemUgOiAxMjAsXG4gICAgZmlsbCA6IFwiIzE3MTcxN1wiXG59KTtcblxudmFyIG1hdGVyaWFsID0gbmV3IEJsb3R0ZXIuQ2hhbm5lbFNwbGl0TWF0ZXJpYWwoKTtcblxudmFyIGJsb3R0ZXIxID0gbmV3IEJsb3R0ZXIobWF0ZXJpYWwsIHsgdGV4dHMgOiB0ZXh0MSB9KTtcbnZhciBzY29wZTEgPSBibG90dGVyMS5mb3JUZXh0KHRleHQxKTtcbnNjb3BlMS5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcblxuLy8gdmFyIGJsb3R0ZXIyID0gbmV3IEJsb3R0ZXIobWF0ZXJpYWwsIHsgdGV4dHMgOiB0ZXh0MiB9KTtcbi8vIHZhciBzY29wZTIgPSBibG90dGVyMi5mb3JUZXh0KHRleHQyKTtcbi8vIHNjb3BlMi5hcHBlbmRUbyhkb2N1bWVudC5ib2R5KTtcblxuc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgIHZhciBlbGVtZW50ID0gJCgnLmItY2FudmFzJykuZGV0YWNoKCk7XG4gICAgLy8gJCgnLnMwMCcpLmFwcGVuZChlbGVtZW50KTtcbn0sMjAwMCk7XG5cbi8vaHR0cHM6Ly9jb2RlcGVuLmlvL1NpbW9uRXZhbnMvcGVuL1BRS2d5UVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2JyYWRsZXkvYmxvdHRlclxuLy8gaHR0cHM6Ly9ibG90dGVyLmpzLm9yZy8jL2RvY3VtZW50YXRpb24iLCJ2YXIgcGFydGljbGVzID0gW107XG52YXIgbGltaXQgPSAxMDtcbnZhciBpbWdzID0gW107XG52YXIgd2Vha3NpZ25hbHMgPSBbXTtcbnZhciBrZXl3b3JkcyA9IFtdO1xudmFyIGF0dHJhY3RvcnMgPSBbXTtcbnZhciBqc29uRGF0YSA9IHt9O1xudmFyIHBhZGRpbmcgPSAxMDA7XG52YXIgZ3JpZCA9IDU7XG5cblxuZnVuY3Rpb24gcHJlbG9hZCgpIHtcbiAgICB2YXIganNvbkZpbGUgPSBcIi4uL2RhdGEvZnJvbXNwcmVhZHNoZWV0Lmpzb25cIjtcbiAgICBqc29uRGF0YSA9IGxvYWRKU09OKGpzb25GaWxlKTtcbiAgICBjb25zb2xlLmxvZyhqc29uRGF0YSk7XG59XG5cbnZhciBjbnY7XG5cblxudmFyIGF0bGFzT2JqID0gZnVuY3Rpb24od2Vha3NpZ25hbCwga2V5d29yZCl7XG4gICAgdGhpcy5rdyA9IGtleXdvcmQ7XG4gICAgdGhpcy53cyA9IHdlYWtzaWduYWw7XG59O1xuXG5mdW5jdGlvbiBjZW50ZXJDYW52YXMoKSB7XG4gICAgY252ID0gY3JlYXRlQ2FudmFzKHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQpO1xuICAgIHZhciB4ID0gKHdpbmRvd1dpZHRoIC0gd2lkdGgpIC8gMjtcbiAgICB2YXIgeSA9ICh3aW5kb3dIZWlnaHQgLSBoZWlnaHQpIC8gMjtcbiAgICBjbnYucG9zaXRpb24oeCwgeSk7XG59XG5cbmZ1bmN0aW9uIHdpbmRvd1Jlc2l6ZWQoKSB7XG4gICAgY2VudGVyQ2FudmFzKCk7XG59XG5cbmZ1bmN0aW9uIHNldHVwKCkge1xuICAgIGNlbnRlckNhbnZhcygpO1xuICAgIHNldHVwV2Vha1NpZ25hbHMoKTtcbiAgICB0ZXh0Rm9udChcIk92ZXJwYXNzIE1vbm9cIik7XG4gICAgZnJhbWVSYXRlKDYwKTtcblxuICAgIHdlYWtzaWduYWxzLmZvckVhY2goZnVuY3Rpb24od3MsIGkpe1xuICAgICAgICBrZXl3b3Jkc1tpXS5mb3JFYWNoKGZ1bmN0aW9uKGt3LCBqKXtcbiAgICAgICAgICAgIHZhciBhdGxzID0gbmV3IGF0bGFzT2JqKHdzLCBrdyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhdGxzKTtcbiAgICAgICAgICAgIHBhcnRpY2xlcy5wdXNoKG5ldyBQYXJ0aWNsZShyYW5kb20oNTAsIHdpZHRoIC0gNTApLCByYW5kb20oNTAsIGhlaWdodCAtIDUwKSwge3dzOndzLCBrdzprd30pKTtcbiAgICAgICAgfSk7XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gZHJhdygpIHtcbiAgICAvLyBiYWNrZ3JvdW5kKCcjZmZmZmZmJyk7XG4gICAgY2xlYXIoKTtcblxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0aWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcGFydGljbGVzW2ldLmFwcGx5R3Jhdml0eSgpO1xuICAgICAgICAvLyBwYXJ0aWNsZXNbaV0uc2VwYXJhdGUocGFydGljbGVzKTtcbiAgICAgICAgLy8gcGFydGljbGVzW2ldLnNlcGFyYXRlKGF0dHJhY3RvcnMpO1xuICAgICAgICBwYXJ0aWNsZXNbaV0udXBkYXRlKCk7XG4gICAgICAgIHBhcnRpY2xlc1tpXS5kaXNwbGF5KCk7XG4gICAgfVxuXG4gICAgdGV4dFNpemUoMTQpO1xuICAgIGZpbGwoMCk7XG4gICAgYXR0cmFjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uKGEpe1xuICAgICAgICBhLnVwZGF0ZSgpO1xuICAgICAgICBhLmRpc3BsYXkoKTtcbiAgICB9KTtcbn1cblxuY29uc29sZS5sb2coJ2hlbGxvJysnd29ybGQnLnJlcGVhdCgzKSk7XG5cbmZ1bmN0aW9uIHNldHVwV2Vha1NpZ25hbHMoKXtcblxuICAgIC8vY2xpcHBpbmcga2V5d29yZCBsaXN0IHRvIHJhbmRvbSBzZWxlY3RlZCB3b3JkcyB1bnRpbCB3b3JkQ291bnQgcmVhY2hlZFxuICAgIGZvciAodmFyIGkgaW4ganNvbkRhdGEpe1xuICAgICAgICB2YXIgd29yZENvdW50ID0gNTtcbiAgICAgICAgdmFyIGl0ZW1zLCBpbmRleCwgaXRlbTtcbiAgICAgICAgaWYgKGpzb25EYXRhW2ldW1wia2V5d29yZHNcIl0ubGVuZ3RoID4gd29yZENvdW50KSB7XG4gICAgICAgICAgICB2YXIgbmV3SXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgd29yZENvdW50OyBqKyspIHtcbiAgICAgICAgICAgICAgICBpdGVtcyA9IGpzb25EYXRhW2ldW1wia2V5d29yZHNcIl07XG4gICAgICAgICAgICAgICAgaW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpdGVtcy5sZW5ndGgpO1xuICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIG5ld0l0ZW1zLnB1c2goaXRlbVswXSk7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaXRlbVswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdJdGVtcyk7XG4gICAgICAgICAgICBqc29uRGF0YVtpXVtcImtleXdvcmRzXCJdID0gbmV3SXRlbXMuc2xpY2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZyhqc29uRGF0YSk7XG5cblxuICAgIC8vIGNvbnNvbGUubG9nKCdzZXR1cCcpO1xuICAgIC8vIGNvbnNvbGUubG9nKGpzb25EYXRhKTtcblxuICAgIHZhciBqID0gMCwgayA9IDA7XG4gICAgZm9yICh2YXIgaSBpbiBqc29uRGF0YSl7XG4gICAgICAgIGNvbnNvbGUubG9nKGosayk7XG4gICAgICAgIGF0dHJhY3RvcnMucHVzaChuZXcgQXR0cmFjdG9yKGpzb25EYXRhW2ldW1wibmFtZVwiXSwgaiwgaykpO1xuICAgICAgICB3ZWFrc2lnbmFscy5wdXNoKGpzb25EYXRhW2ldW1wibmFtZVwiXSk7XG4gICAgICAgIGtleXdvcmRzLnB1c2goanNvbkRhdGFbaV1bXCJrZXl3b3Jkc1wiXSk7XG4gICAgICAgICQoKFwiLnNcIiArIGopK2spLmh0bWwoanNvbkRhdGFbaV1bXCJuYW1lXCJdKTtcbiAgICAgICAgaWYgKGogPT0gKGdyaWQtMSkpe1xuICAgICAgICAgICAgaysrO1xuICAgICAgICAgICAgaiA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGorKztcbiAgICB9XG5cbiAgICAvLyBjb25zb2xlLmxvZyh3ZWFrc2lnbmFscylcbiAgICAvLyAzICogMyBncmlkXG59XG5cblxuIl19
