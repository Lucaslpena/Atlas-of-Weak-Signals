/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
function Particle(x, y, imgLoc) {
  this.pos = createVector(x, y);
  this.vel = createVector(random(-2, 2), random(-2, 2));
  this.acc = createVector(0, -8);
  this.size = 20;
  this.maxSpeed = .3;
  this.maxForce = 1;
  this.theta = 0.0;
  this.img = imgLoc;
  this.gifShow = false;
  this.paused = true; // set to true

  this.frozen = true;
  this.itvl = floor(random(200, 1000));

  this.spawn = function () {//     if( (this.img.frame([]) > 100) || (this.img.frame([]) < 5) ){
    //       if (this.gifShow == true) {
    //         //print('finished showing');
    //         this.paused = true;
    //       }
    //       this.gifShow = false; // hidden
    //     } else {
    //       this.gifShow = true; // showing
    //     }
    //     if (this.frozen) {
    //       if( (frameCount % this.itvl) == 0){
    //         //print('thaw');
    //         this.img.play();
    //         this.frozen = false;
    //       }
    //     }
  };

  this.update = function () {
    //deadFIX
    this.spawn();
    this.vel.add(this.acc);
    this.vel.limit(this.maxSpeed);
    this.pos.add(this.vel);
    this.acc.set(0, 0);
    this.border();
  };

  this.display = function () {
    var theta = this.vel.heading() + radians(90);
    this.theta += this.vel.x * this.vel.mag() / 20;
    var r = 4;
    push();
    translate(this.pos.x, this.pos.y);
    rotate(this.theta);
    rect(0, 0, 10, 10); // if (this.paused) { //paused
    //print('paused');
    //print('frozen');
    // this.paused = false;
    // this.frozen = true;
    // this.img.pause();
    // }
    // if (this.img.loaded()){
    //   image(this.img, this.size/-2, this.size/-2, this.size, this.size);
    // }

    pop();
  };

  this.border = function () {
    if (this.pos.x < -this.size) this.pos.x = width + this.size;
    if (this.pos.y < -this.size) this.pos.y = height + this.size;
    if (this.pos.x > width + this.size) this.pos.x = -this.size;
    if (this.pos.y > height + this.size) this.pos.y = -this.size;
  };

  this.separate = function (vehicles) {
    var desiredseparation = this.size * 1.1;
    var sum = createVector();
    var count = 0;

    for (var i = 0; i < vehicles.length; i++) {
      var d = p5.Vector.dist(this.pos, vehicles[i].pos);

      if (d > 0 && d < desiredseparation) {
        var diff = p5.Vector.sub(this.pos, vehicles[i].pos);
        diff.normalize();
        diff.div(d);
        sum.add(diff);
        count++;
      }
    }

    if (count > 0) {
      sum.div(count);
      sum.normalize();
      sum.mult(this.maxSpeed * 10);
      var steer = p5.Vector.sub(sum, this.velocity);
      steer.limit(this.maxforce);
      this.applyForce(steer);
    }
  };

  this.applyForce = function (force) {
    this.acc.add(force);
  };
}
/*!
 * aows
 * 
 * 
 * @author Lucas Lorenzo Pena <lucaslpena@gmail.com>
 * @version 0.1.0
 * Copyright 2019. CC-BY-NC-SA-4.0 licensed.
 */
var particles = [];
var limit = 11;
var imgs = [];
var gif;

function preload() {}

var cnv;

function centerCanvas() {
  cnv = createCanvas(windowWidth, windowHeight);
  var x = (windowWidth - width) / 2;
  var y = (windowHeight - height) / 2;
  cnv.position(x, y);
}

function windowResized() {
  centerCanvas();
}

function setup() {
  centerCanvas();

  for (var i = 0; i < limit; i++) {
    var imgLoc = floor(random(1, imgs.length)) - 1;
    var img = imgs[i];
    particles.push(new Particle(random(50, width - 50), random(50, height - 50), img));
  }

  textFont("Overpass Mono");
}

function draw() {
  background('#000');

  for (var i = 0; i < limit; i++) {
    particles[i].separate(particles);
    particles[i].update();
    particles[i].display();
  }

  fill(255);
  textSize(32);
  text("   The Future Is Now", mouseX, mouseY, 600, 200);
}

console.log('hello' + 'world'.repeat(3));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnRpY2xlLmpzIiwic2tldGNoLmpzIl0sIm5hbWVzIjpbIlBhcnRpY2xlIiwieCIsInkiLCJpbWdMb2MiLCJwb3MiLCJjcmVhdGVWZWN0b3IiLCJ2ZWwiLCJyYW5kb20iLCJhY2MiLCJzaXplIiwibWF4U3BlZWQiLCJtYXhGb3JjZSIsInRoZXRhIiwiaW1nIiwiZ2lmU2hvdyIsInBhdXNlZCIsImZyb3plbiIsIml0dmwiLCJmbG9vciIsInNwYXduIiwidXBkYXRlIiwiYWRkIiwibGltaXQiLCJzZXQiLCJib3JkZXIiLCJkaXNwbGF5IiwiaGVhZGluZyIsInJhZGlhbnMiLCJtYWciLCJyIiwicHVzaCIsInRyYW5zbGF0ZSIsInJvdGF0ZSIsInJlY3QiLCJwb3AiLCJ3aWR0aCIsImhlaWdodCIsInNlcGFyYXRlIiwidmVoaWNsZXMiLCJkZXNpcmVkc2VwYXJhdGlvbiIsInN1bSIsImNvdW50IiwiaSIsImxlbmd0aCIsImQiLCJwNSIsIlZlY3RvciIsImRpc3QiLCJkaWZmIiwic3ViIiwibm9ybWFsaXplIiwiZGl2IiwibXVsdCIsInN0ZWVyIiwidmVsb2NpdHkiLCJtYXhmb3JjZSIsImFwcGx5Rm9yY2UiLCJmb3JjZSIsInBhcnRpY2xlcyIsImltZ3MiLCJnaWYiLCJwcmVsb2FkIiwiY252IiwiY2VudGVyQ2FudmFzIiwiY3JlYXRlQ2FudmFzIiwid2luZG93V2lkdGgiLCJ3aW5kb3dIZWlnaHQiLCJwb3NpdGlvbiIsIndpbmRvd1Jlc2l6ZWQiLCJzZXR1cCIsInRleHRGb250IiwiZHJhdyIsImJhY2tncm91bmQiLCJmaWxsIiwidGV4dFNpemUiLCJ0ZXh0IiwibW91c2VYIiwibW91c2VZIiwiY29uc29sZSIsImxvZyIsInJlcGVhdCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxTQUFTQSxRQUFULENBQWtCQyxDQUFsQixFQUFvQkMsQ0FBcEIsRUFBdUJDLE1BQXZCLEVBQThCO0FBQzFCLE9BQUtDLEdBQUwsR0FBV0MsWUFBWSxDQUFDSixDQUFELEVBQUlDLENBQUosQ0FBdkI7QUFDQSxPQUFLSSxHQUFMLEdBQVdELFlBQVksQ0FBQ0UsTUFBTSxDQUFDLENBQUMsQ0FBRixFQUFJLENBQUosQ0FBUCxFQUFjQSxNQUFNLENBQUMsQ0FBQyxDQUFGLEVBQUksQ0FBSixDQUFwQixDQUF2QjtBQUNBLE9BQUtDLEdBQUwsR0FBV0gsWUFBWSxDQUFDLENBQUQsRUFBRyxDQUFDLENBQUosQ0FBdkI7QUFDQSxPQUFLSSxJQUFMLEdBQVksRUFBWjtBQUNBLE9BQUtDLFFBQUwsR0FBZ0IsRUFBaEI7QUFDQSxPQUFLQyxRQUFMLEdBQWdCLENBQWhCO0FBQ0EsT0FBS0MsS0FBTCxHQUFhLEdBQWI7QUFDQSxPQUFLQyxHQUFMLEdBQVdWLE1BQVg7QUFDQSxPQUFLVyxPQUFMLEdBQWUsS0FBZjtBQUNBLE9BQUtDLE1BQUwsR0FBYyxJQUFkLENBVjBCLENBVU47O0FBQ3BCLE9BQUtDLE1BQUwsR0FBYyxJQUFkO0FBQ0EsT0FBS0MsSUFBTCxHQUFZQyxLQUFLLENBQUNYLE1BQU0sQ0FBQyxHQUFELEVBQUssSUFBTCxDQUFQLENBQWpCOztBQUdBLE9BQUtZLEtBQUwsR0FBYSxZQUFVLENBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0ssR0FuQkQ7O0FBcUJBLE9BQUtDLE1BQUwsR0FBYyxZQUFVO0FBQ3BCO0FBQ0EsU0FBS0QsS0FBTDtBQUNBLFNBQUtiLEdBQUwsQ0FBU2UsR0FBVCxDQUFhLEtBQUtiLEdBQWxCO0FBQ0EsU0FBS0YsR0FBTCxDQUFTZ0IsS0FBVCxDQUFlLEtBQUtaLFFBQXBCO0FBQ0EsU0FBS04sR0FBTCxDQUFTaUIsR0FBVCxDQUFhLEtBQUtmLEdBQWxCO0FBQ0EsU0FBS0UsR0FBTCxDQUFTZSxHQUFULENBQWEsQ0FBYixFQUFlLENBQWY7QUFDQSxTQUFLQyxNQUFMO0FBQ0gsR0FSRDs7QUFVQSxPQUFLQyxPQUFMLEdBQWUsWUFBVTtBQUNyQixRQUFJYixLQUFLLEdBQUcsS0FBS04sR0FBTCxDQUFTb0IsT0FBVCxLQUFxQkMsT0FBTyxDQUFDLEVBQUQsQ0FBeEM7QUFDQSxTQUFLZixLQUFMLElBQWUsS0FBS04sR0FBTCxDQUFTTCxDQUFULEdBQWEsS0FBS0ssR0FBTCxDQUFTc0IsR0FBVCxFQUFkLEdBQWdDLEVBQTlDO0FBQ0EsUUFBSUMsQ0FBQyxHQUFHLENBQVI7QUFDQUMsSUFBQUEsSUFBSTtBQUNKQyxJQUFBQSxTQUFTLENBQUMsS0FBSzNCLEdBQUwsQ0FBU0gsQ0FBVixFQUFhLEtBQUtHLEdBQUwsQ0FBU0YsQ0FBdEIsQ0FBVDtBQUNBOEIsSUFBQUEsTUFBTSxDQUFDLEtBQUtwQixLQUFOLENBQU47QUFFQXFCLElBQUFBLElBQUksQ0FBQyxDQUFELEVBQUcsQ0FBSCxFQUFLLEVBQUwsRUFBUSxFQUFSLENBQUosQ0FScUIsQ0FVckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBQ0FDLElBQUFBLEdBQUc7QUFDTixHQXJCRDs7QUF1QkEsT0FBS1YsTUFBTCxHQUFjLFlBQVU7QUFDcEIsUUFBSSxLQUFLcEIsR0FBTCxDQUFTSCxDQUFULEdBQWEsQ0FBQyxLQUFLUSxJQUF2QixFQUE2QixLQUFLTCxHQUFMLENBQVNILENBQVQsR0FBYWtDLEtBQUssR0FBQyxLQUFLMUIsSUFBeEI7QUFDN0IsUUFBSSxLQUFLTCxHQUFMLENBQVNGLENBQVQsR0FBYSxDQUFDLEtBQUtPLElBQXZCLEVBQTZCLEtBQUtMLEdBQUwsQ0FBU0YsQ0FBVCxHQUFha0MsTUFBTSxHQUFDLEtBQUszQixJQUF6QjtBQUM3QixRQUFJLEtBQUtMLEdBQUwsQ0FBU0gsQ0FBVCxHQUFha0MsS0FBSyxHQUFDLEtBQUsxQixJQUE1QixFQUFrQyxLQUFLTCxHQUFMLENBQVNILENBQVQsR0FBYSxDQUFDLEtBQUtRLElBQW5CO0FBQ2xDLFFBQUksS0FBS0wsR0FBTCxDQUFTRixDQUFULEdBQWFrQyxNQUFNLEdBQUMsS0FBSzNCLElBQTdCLEVBQW1DLEtBQUtMLEdBQUwsQ0FBU0YsQ0FBVCxHQUFhLENBQUMsS0FBS08sSUFBbkI7QUFDdEMsR0FMRDs7QUFPQSxPQUFLNEIsUUFBTCxHQUFnQixVQUFTQyxRQUFULEVBQW1CO0FBQy9CLFFBQUlDLGlCQUFpQixHQUFHLEtBQUs5QixJQUFMLEdBQVUsR0FBbEM7QUFDQSxRQUFJK0IsR0FBRyxHQUFHbkMsWUFBWSxFQUF0QjtBQUNBLFFBQUlvQyxLQUFLLEdBQUcsQ0FBWjs7QUFDQSxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdKLFFBQVEsQ0FBQ0ssTUFBN0IsRUFBcUNELENBQUMsRUFBdEMsRUFBMEM7QUFDdEMsVUFBSUUsQ0FBQyxHQUFHQyxFQUFFLENBQUNDLE1BQUgsQ0FBVUMsSUFBVixDQUFlLEtBQUszQyxHQUFwQixFQUF5QmtDLFFBQVEsQ0FBQ0ksQ0FBRCxDQUFSLENBQVl0QyxHQUFyQyxDQUFSOztBQUNBLFVBQUt3QyxDQUFDLEdBQUcsQ0FBTCxJQUFZQSxDQUFDLEdBQUdMLGlCQUFwQixFQUF3QztBQUNwQyxZQUFJUyxJQUFJLEdBQUdILEVBQUUsQ0FBQ0MsTUFBSCxDQUFVRyxHQUFWLENBQWMsS0FBSzdDLEdBQW5CLEVBQXdCa0MsUUFBUSxDQUFDSSxDQUFELENBQVIsQ0FBWXRDLEdBQXBDLENBQVg7QUFDQTRDLFFBQUFBLElBQUksQ0FBQ0UsU0FBTDtBQUNBRixRQUFBQSxJQUFJLENBQUNHLEdBQUwsQ0FBU1AsQ0FBVDtBQUNBSixRQUFBQSxHQUFHLENBQUNuQixHQUFKLENBQVEyQixJQUFSO0FBQ0FQLFFBQUFBLEtBQUs7QUFDUjtBQUNKOztBQUNELFFBQUlBLEtBQUssR0FBRyxDQUFaLEVBQWU7QUFDWEQsTUFBQUEsR0FBRyxDQUFDVyxHQUFKLENBQVFWLEtBQVI7QUFDQUQsTUFBQUEsR0FBRyxDQUFDVSxTQUFKO0FBQ0FWLE1BQUFBLEdBQUcsQ0FBQ1ksSUFBSixDQUFTLEtBQUsxQyxRQUFMLEdBQWdCLEVBQXpCO0FBQ0EsVUFBSTJDLEtBQUssR0FBR1IsRUFBRSxDQUFDQyxNQUFILENBQVVHLEdBQVYsQ0FBY1QsR0FBZCxFQUFtQixLQUFLYyxRQUF4QixDQUFaO0FBQ0FELE1BQUFBLEtBQUssQ0FBQy9CLEtBQU4sQ0FBWSxLQUFLaUMsUUFBakI7QUFDQSxXQUFLQyxVQUFMLENBQWdCSCxLQUFoQjtBQUNIO0FBQ0osR0F0QkQ7O0FBdUJBLE9BQUtHLFVBQUwsR0FBa0IsVUFBU0MsS0FBVCxFQUFnQjtBQUM5QixTQUFLakQsR0FBTCxDQUFTYSxHQUFULENBQWFvQyxLQUFiO0FBQ0gsR0FGRDtBQUlIOzs7Ozs7Ozs7QUN2R0QsSUFBSUMsU0FBUyxHQUFHLEVBQWhCO0FBQ0EsSUFBSXBDLEtBQUssR0FBRyxFQUFaO0FBQ0EsSUFBSXFDLElBQUksR0FBRyxFQUFYO0FBRUEsSUFBSUMsR0FBSjs7QUFFQSxTQUFTQyxPQUFULEdBQW1CLENBRWxCOztBQUVELElBQUlDLEdBQUo7O0FBRUEsU0FBU0MsWUFBVCxHQUF3QjtBQUNwQkQsRUFBQUEsR0FBRyxHQUFHRSxZQUFZLENBQUNDLFdBQUQsRUFBY0MsWUFBZCxDQUFsQjtBQUNBLE1BQUlqRSxDQUFDLEdBQUcsQ0FBQ2dFLFdBQVcsR0FBRzlCLEtBQWYsSUFBd0IsQ0FBaEM7QUFDQSxNQUFJakMsQ0FBQyxHQUFHLENBQUNnRSxZQUFZLEdBQUc5QixNQUFoQixJQUEwQixDQUFsQztBQUNBMEIsRUFBQUEsR0FBRyxDQUFDSyxRQUFKLENBQWFsRSxDQUFiLEVBQWdCQyxDQUFoQjtBQUNIOztBQUVELFNBQVNrRSxhQUFULEdBQXlCO0FBQ3JCTCxFQUFBQSxZQUFZO0FBQ2Y7O0FBRUQsU0FBU00sS0FBVCxHQUFpQjtBQUNiTixFQUFBQSxZQUFZOztBQUNaLE9BQUssSUFBSXJCLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUdwQixLQUFwQixFQUEyQm9CLENBQUMsRUFBNUIsRUFBZ0M7QUFDNUIsUUFBSXZDLE1BQU0sR0FBSWUsS0FBSyxDQUFDWCxNQUFNLENBQUMsQ0FBRCxFQUFJb0QsSUFBSSxDQUFDaEIsTUFBVCxDQUFQLENBQUwsR0FBZ0MsQ0FBOUM7QUFDQSxRQUFJOUIsR0FBRyxHQUFHOEMsSUFBSSxDQUFDakIsQ0FBRCxDQUFkO0FBQ0FnQixJQUFBQSxTQUFTLENBQUM1QixJQUFWLENBQWUsSUFBSTlCLFFBQUosQ0FBYU8sTUFBTSxDQUFDLEVBQUQsRUFBSzRCLEtBQUssR0FBRyxFQUFiLENBQW5CLEVBQXFDNUIsTUFBTSxDQUFDLEVBQUQsRUFBSzZCLE1BQU0sR0FBRyxFQUFkLENBQTNDLEVBQThEdkIsR0FBOUQsQ0FBZjtBQUNIOztBQUNEeUQsRUFBQUEsUUFBUSxDQUFDLGVBQUQsQ0FBUjtBQUNIOztBQUVELFNBQVNDLElBQVQsR0FBZ0I7QUFDWkMsRUFBQUEsVUFBVSxDQUFDLE1BQUQsQ0FBVjs7QUFFQSxPQUFLLElBQUk5QixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHcEIsS0FBcEIsRUFBMkJvQixDQUFDLEVBQTVCLEVBQWdDO0FBQzVCZ0IsSUFBQUEsU0FBUyxDQUFDaEIsQ0FBRCxDQUFULENBQWFMLFFBQWIsQ0FBc0JxQixTQUF0QjtBQUNBQSxJQUFBQSxTQUFTLENBQUNoQixDQUFELENBQVQsQ0FBYXRCLE1BQWI7QUFDQXNDLElBQUFBLFNBQVMsQ0FBQ2hCLENBQUQsQ0FBVCxDQUFhakIsT0FBYjtBQUNIOztBQUVEZ0QsRUFBQUEsSUFBSSxDQUFDLEdBQUQsQ0FBSjtBQUNBQyxFQUFBQSxRQUFRLENBQUMsRUFBRCxDQUFSO0FBQ0FDLEVBQUFBLElBQUksQ0FBQyxzQkFBRCxFQUNBQyxNQURBLEVBQ1FDLE1BRFIsRUFDZ0IsR0FEaEIsRUFDcUIsR0FEckIsQ0FBSjtBQUVIOztBQUVEQyxPQUFPLENBQUNDLEdBQVIsQ0FBWSxVQUFRLFFBQVFDLE1BQVIsQ0FBZSxDQUFmLENBQXBCIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBQYXJ0aWNsZSh4LHksIGltZ0xvYyl7XG4gICAgdGhpcy5wb3MgPSBjcmVhdGVWZWN0b3IoeCwgeSk7XG4gICAgdGhpcy52ZWwgPSBjcmVhdGVWZWN0b3IocmFuZG9tKC0yLDIpLHJhbmRvbSgtMiwyKSk7XG4gICAgdGhpcy5hY2MgPSBjcmVhdGVWZWN0b3IoMCwtOCk7XG4gICAgdGhpcy5zaXplID0gMjA7XG4gICAgdGhpcy5tYXhTcGVlZCA9IC4zO1xuICAgIHRoaXMubWF4Rm9yY2UgPSAxO1xuICAgIHRoaXMudGhldGEgPSAwLjA7XG4gICAgdGhpcy5pbWcgPSBpbWdMb2M7XG4gICAgdGhpcy5naWZTaG93ID0gZmFsc2U7XG4gICAgdGhpcy5wYXVzZWQgPSB0cnVlOyAvLyBzZXQgdG8gdHJ1ZVxuICAgIHRoaXMuZnJvemVuID0gdHJ1ZTtcbiAgICB0aGlzLml0dmwgPSBmbG9vcihyYW5kb20oMjAwLDEwMDApKTtcblxuXG4gICAgdGhpcy5zcGF3biA9IGZ1bmN0aW9uKCl7XG4vLyAgICAgaWYoICh0aGlzLmltZy5mcmFtZShbXSkgPiAxMDApIHx8ICh0aGlzLmltZy5mcmFtZShbXSkgPCA1KSApe1xuLy8gICAgICAgaWYgKHRoaXMuZ2lmU2hvdyA9PSB0cnVlKSB7XG4vLyAgICAgICAgIC8vcHJpbnQoJ2ZpbmlzaGVkIHNob3dpbmcnKTtcbi8vICAgICAgICAgdGhpcy5wYXVzZWQgPSB0cnVlO1xuLy8gICAgICAgfVxuLy8gICAgICAgdGhpcy5naWZTaG93ID0gZmFsc2U7IC8vIGhpZGRlblxuLy8gICAgIH0gZWxzZSB7XG4vLyAgICAgICB0aGlzLmdpZlNob3cgPSB0cnVlOyAvLyBzaG93aW5nXG4vLyAgICAgfVxuXG5cbi8vICAgICBpZiAodGhpcy5mcm96ZW4pIHtcbi8vICAgICAgIGlmKCAoZnJhbWVDb3VudCAlIHRoaXMuaXR2bCkgPT0gMCl7XG4vLyAgICAgICAgIC8vcHJpbnQoJ3RoYXcnKTtcbi8vICAgICAgICAgdGhpcy5pbWcucGxheSgpO1xuLy8gICAgICAgICB0aGlzLmZyb3plbiA9IGZhbHNlO1xuLy8gICAgICAgfVxuLy8gICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAvL2RlYWRGSVhcbiAgICAgICAgdGhpcy5zcGF3bigpO1xuICAgICAgICB0aGlzLnZlbC5hZGQodGhpcy5hY2MpO1xuICAgICAgICB0aGlzLnZlbC5saW1pdCh0aGlzLm1heFNwZWVkKTtcbiAgICAgICAgdGhpcy5wb3MuYWRkKHRoaXMudmVsKTtcbiAgICAgICAgdGhpcy5hY2Muc2V0KDAsMCk7XG4gICAgICAgIHRoaXMuYm9yZGVyKCk7XG4gICAgfVxuXG4gICAgdGhpcy5kaXNwbGF5ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgdmFyIHRoZXRhID0gdGhpcy52ZWwuaGVhZGluZygpICsgcmFkaWFucyg5MCk7XG4gICAgICAgIHRoaXMudGhldGEgKz0gKHRoaXMudmVsLnggKiB0aGlzLnZlbC5tYWcoKSkgLyAyMDtcbiAgICAgICAgdmFyIHIgPSA0O1xuICAgICAgICBwdXNoKCk7XG4gICAgICAgIHRyYW5zbGF0ZSh0aGlzLnBvcy54LCB0aGlzLnBvcy55KTtcbiAgICAgICAgcm90YXRlKHRoaXMudGhldGEpO1xuXG4gICAgICAgIHJlY3QoMCwwLDEwLDEwKTtcblxuICAgICAgICAvLyBpZiAodGhpcy5wYXVzZWQpIHsgLy9wYXVzZWRcbiAgICAgICAgLy9wcmludCgncGF1c2VkJyk7XG4gICAgICAgIC8vcHJpbnQoJ2Zyb3plbicpO1xuICAgICAgICAvLyB0aGlzLnBhdXNlZCA9IGZhbHNlO1xuICAgICAgICAvLyB0aGlzLmZyb3plbiA9IHRydWU7XG4gICAgICAgIC8vIHRoaXMuaW1nLnBhdXNlKCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gaWYgKHRoaXMuaW1nLmxvYWRlZCgpKXtcbiAgICAgICAgLy8gICBpbWFnZSh0aGlzLmltZywgdGhpcy5zaXplLy0yLCB0aGlzLnNpemUvLTIsIHRoaXMuc2l6ZSwgdGhpcy5zaXplKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBwb3AoKTtcbiAgICB9XG5cbiAgICB0aGlzLmJvcmRlciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmICh0aGlzLnBvcy54IDwgLXRoaXMuc2l6ZSkgdGhpcy5wb3MueCA9IHdpZHRoK3RoaXMuc2l6ZTtcbiAgICAgICAgaWYgKHRoaXMucG9zLnkgPCAtdGhpcy5zaXplKSB0aGlzLnBvcy55ID0gaGVpZ2h0K3RoaXMuc2l6ZTtcbiAgICAgICAgaWYgKHRoaXMucG9zLnggPiB3aWR0aCt0aGlzLnNpemUpIHRoaXMucG9zLnggPSAtdGhpcy5zaXplO1xuICAgICAgICBpZiAodGhpcy5wb3MueSA+IGhlaWdodCt0aGlzLnNpemUpIHRoaXMucG9zLnkgPSAtdGhpcy5zaXplO1xuICAgIH1cblxuICAgIHRoaXMuc2VwYXJhdGUgPSBmdW5jdGlvbih2ZWhpY2xlcykge1xuICAgICAgICB2YXIgZGVzaXJlZHNlcGFyYXRpb24gPSB0aGlzLnNpemUqMS4xO1xuICAgICAgICB2YXIgc3VtID0gY3JlYXRlVmVjdG9yKCk7XG4gICAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmVoaWNsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBkID0gcDUuVmVjdG9yLmRpc3QodGhpcy5wb3MsIHZlaGljbGVzW2ldLnBvcyk7XG4gICAgICAgICAgICBpZiAoKGQgPiAwKSAmJiAoZCA8IGRlc2lyZWRzZXBhcmF0aW9uKSkge1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gcDUuVmVjdG9yLnN1Yih0aGlzLnBvcywgdmVoaWNsZXNbaV0ucG9zKTtcbiAgICAgICAgICAgICAgICBkaWZmLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgICAgIGRpZmYuZGl2KGQpO1xuICAgICAgICAgICAgICAgIHN1bS5hZGQoZGlmZik7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgICAgICBzdW0uZGl2KGNvdW50KTtcbiAgICAgICAgICAgIHN1bS5ub3JtYWxpemUoKTtcbiAgICAgICAgICAgIHN1bS5tdWx0KHRoaXMubWF4U3BlZWQgKiAxMCk7XG4gICAgICAgICAgICB2YXIgc3RlZXIgPSBwNS5WZWN0b3Iuc3ViKHN1bSwgdGhpcy52ZWxvY2l0eSk7XG4gICAgICAgICAgICBzdGVlci5saW1pdCh0aGlzLm1heGZvcmNlKTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlGb3JjZShzdGVlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5hcHBseUZvcmNlID0gZnVuY3Rpb24oZm9yY2UpIHtcbiAgICAgICAgdGhpcy5hY2MuYWRkKGZvcmNlKTtcbiAgICB9XG5cbn0iLCJ2YXIgcGFydGljbGVzID0gW107XG52YXIgbGltaXQgPSAxMTtcbnZhciBpbWdzID0gW107XG5cbnZhciBnaWY7XG5cbmZ1bmN0aW9uIHByZWxvYWQoKSB7XG5cbn1cblxudmFyIGNudjtcblxuZnVuY3Rpb24gY2VudGVyQ2FudmFzKCkge1xuICAgIGNudiA9IGNyZWF0ZUNhbnZhcyh3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0KTtcbiAgICB2YXIgeCA9ICh3aW5kb3dXaWR0aCAtIHdpZHRoKSAvIDI7XG4gICAgdmFyIHkgPSAod2luZG93SGVpZ2h0IC0gaGVpZ2h0KSAvIDI7XG4gICAgY252LnBvc2l0aW9uKHgsIHkpO1xufVxuXG5mdW5jdGlvbiB3aW5kb3dSZXNpemVkKCkge1xuICAgIGNlbnRlckNhbnZhcygpO1xufVxuXG5mdW5jdGlvbiBzZXR1cCgpIHtcbiAgICBjZW50ZXJDYW52YXMoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpbWl0OyBpKyspIHtcbiAgICAgICAgdmFyIGltZ0xvYyA9IChmbG9vcihyYW5kb20oMSwgaW1ncy5sZW5ndGgpKSAtIDEpO1xuICAgICAgICB2YXIgaW1nID0gaW1nc1tpXTtcbiAgICAgICAgcGFydGljbGVzLnB1c2gobmV3IFBhcnRpY2xlKHJhbmRvbSg1MCwgd2lkdGggLSA1MCksIHJhbmRvbSg1MCwgaGVpZ2h0IC0gNTApLCBpbWcpKTtcbiAgICB9XG4gICAgdGV4dEZvbnQoXCJPdmVycGFzcyBNb25vXCIpO1xufVxuXG5mdW5jdGlvbiBkcmF3KCkge1xuICAgIGJhY2tncm91bmQoJyMwMDAnKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGltaXQ7IGkrKykge1xuICAgICAgICBwYXJ0aWNsZXNbaV0uc2VwYXJhdGUocGFydGljbGVzKVxuICAgICAgICBwYXJ0aWNsZXNbaV0udXBkYXRlKCk7XG4gICAgICAgIHBhcnRpY2xlc1tpXS5kaXNwbGF5KCk7XG4gICAgfVxuXG4gICAgZmlsbCgyNTUpO1xuICAgIHRleHRTaXplKDMyKTtcbiAgICB0ZXh0KFwiICAgVGhlIEZ1dHVyZSBJcyBOb3dcIixcbiAgICAgICAgbW91c2VYLCBtb3VzZVksIDYwMCwgMjAwKTtcbn1cblxuY29uc29sZS5sb2coJ2hlbGxvJysnd29ybGQnLnJlcGVhdCgzKSk7Il19
